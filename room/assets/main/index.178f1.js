System.register("chunks:///main.js",["./ResourceManager-de4f1d1d.js","cc","./index-6eaaed8c.js","./State-84aab6fd.js","./index-d139aad2.js","./FaderManager-41fa1fe6.js","./index-5211e3ff.js"],(function(){"use strict";var t,e,n,i,s,a,r,o,h,c,u,l,p,f,T,v,d,E,M,I,m,R,O,L,S,y,g,C,A,F,K,B,_,H,D,P,w,b,k,N,x,G,U,Y,W,V,X,Z,z,j;return{setters:[function(u){t=u._,e=u.a,n=u.E,i=u.D,s=u.b,a=u.c,r=u.R,o=u.d,h=u.e,c=u.f},function(t){u=t.cclegacy,l=t.AnimationClip,p=t._decorator,f=t.Animation,T=t.Component,v=t.UITransform,d=t.Sprite,E=t.game,M=t.director,I=t.ProgressBar,m=t.resources,R=t.Node},function(t){O=t.D,L=t.P,S=t.S,y=t.E,g=t.a,C=t.b,A=t.C,F=t.c,K=t.d,B=t.e,_=t.f},function(t){H=t.S,D=t.D,P=t.g,w=t.a,b=t.b,k=t.E,N=t.c,x=t.d,G=t.A,U=t.T,Y=t.e,W=t.f},function(t){V=t.r,X=t.c,Z=t.a},function(t){z=t.F},function(t){j=t.l}],execute:function(){u._RF.push({},"f173edVKrBMZLAscPc5/OLo","DeathSubStateMachine",void 0);var q="texture/ironskeleton/death",J=function(e){function n(t){var n;return(n=e.call(this,t)||this).stateMachines.set(O.TOP,new H(t,q+"/top")),n.stateMachines.set(O.BOTTOM,new H(t,q+"/bottom")),n.stateMachines.set(O.LEFT,new H(t,q+"/left")),n.stateMachines.set(O.RIGHT,new H(t,q+"/right")),n}return t(n,e),n}(D);u._RF.pop(),u._RF.push({},"c7ea4vP0ZhDNKtFE30bVa5r","IdleSubStateMachine",void 0);var Q,$="texture/ironskeleton/idle",tt=function(e){function n(t){var n;return(n=e.call(this,t)||this).stateMachines.set(O.TOP,new H(t,$+"/top",l.WrapMode.Loop)),n.stateMachines.set(O.BOTTOM,new H(t,$+"/bottom",l.WrapMode.Loop)),n.stateMachines.set(O.LEFT,new H(t,$+"/left",l.WrapMode.Loop)),n.stateMachines.set(O.RIGHT,new H(t,$+"/right",l.WrapMode.Loop)),n}return t(n,e),n}(D);u._RF.pop(),u._RF.push({},"68782wV8HhCfa6ekm9AeUZP","IronSkeletonStateMachine",void 0);var et,nt=(0,p.ccclass)("IronSkeletonStateMachine")(Q=function(n){function i(){return n.apply(this,arguments)||this}t(i,n);var s=i.prototype;return s.init=function(){var t=e((function*(){this.animationComponent=this.node.addComponent(f),this.initParams(),this.initStateMachines(),this.initAnimationEvent(),yield Promise.all(this.waitingList)}));return function(){return t.apply(this,arguments)}}(),s.initAnimationEvent=function(){},s.initParams=function(){this.params.set(L.IDLE,P()),this.params.set(L.DEATH,P()),this.params.set(L.DIRECTION,w())},s.initStateMachines=function(){this.stateMachines.set(L.IDLE,new tt(this)),this.stateMachines.set(L.DEATH,new J(this))},s.run=function(){switch(this.currentState){case this.stateMachines.get(L.IDLE):case this.stateMachines.get(L.DEATH):this.params.get(L.DEATH).value?this.currentState=this.stateMachines.get(L.DEATH):this.params.get(L.IDLE).value?this.currentState=this.stateMachines.get(L.IDLE):this.currentState=this.currentState;break;default:this.currentState=this.stateMachines.get(L.IDLE)}},i}(b))||Q;u._RF.pop(),u._RF.push({},"02a45asaOtAKZAxKwe/CZnq","IronSkeletonManager",void 0);var it=(0,p.ccclass)("IronSkeletonManager")(et=function(n){function i(){return n.apply(this,arguments)||this}return t(i,n),i.prototype.init=function(){var t=e((function*(t){this.fsm=this.addComponent(nt),yield this.fsm.init(),n.prototype.init.call(this,t)}));return function(e){return t.apply(this,arguments)}}(),i}(k))||et;u._RF.pop(),u._RF.push({},"032f1gC8HNPAawJORmBFCmT","SpikesSubStateMachine",void 0);var st=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.prototype.run=function(){var t=this.fsm.params.get(L.SPIKES_CUR_COUNT).value;this.currentState=this.stateMachines.get(S[t])},n}(N);u._RF.pop(),u._RF.push({},"0449atsP6hAE7SDWlRAX/ZB","IdleSubStateMachine",void 0);var at="texture/woodenskeleton/idle",rt=function(e){function n(t){var n;return(n=e.call(this,t)||this).stateMachines.set(O.TOP,new H(t,at+"/top",l.WrapMode.Loop)),n.stateMachines.set(O.BOTTOM,new H(t,at+"/bottom",l.WrapMode.Loop)),n.stateMachines.set(O.LEFT,new H(t,at+"/left",l.WrapMode.Loop)),n.stateMachines.set(O.RIGHT,new H(t,at+"/right",l.WrapMode.Loop)),n}return t(n,e),n}(D);u._RF.pop(),u._RF.push({},"e7a6egW87pAuZpp9ND5dAMp","AttackSubStateMachine",void 0);var ot="texture/woodenskeleton/attack",ht=function(e){function n(t){var n;return(n=e.call(this,t)||this).stateMachines.set(O.TOP,new H(t,ot+"/top")),n.stateMachines.set(O.BOTTOM,new H(t,ot+"/bottom")),n.stateMachines.set(O.LEFT,new H(t,ot+"/left")),n.stateMachines.set(O.RIGHT,new H(t,ot+"/right")),n}return t(n,e),n}(D);u._RF.pop(),u._RF.push({},"4692b5GdaBEEJvU/4+UN5W8","DeathSubStateMachine",void 0);var ct,ut="texture/woodenskeleton/death",lt=function(e){function n(t){var n;return(n=e.call(this,t)||this).stateMachines.set(O.TOP,new H(t,ut+"/top")),n.stateMachines.set(O.BOTTOM,new H(t,ut+"/bottom")),n.stateMachines.set(O.LEFT,new H(t,ut+"/left")),n.stateMachines.set(O.RIGHT,new H(t,ut+"/right")),n}return t(n,e),n}(D);u._RF.pop(),u._RF.push({},"fe448NKl0dLP5XbtdE+pRER","WoodenSkeletonStateMachine",void 0);var pt,ft=(0,p.ccclass)("WoodenSkeletonStateMachine")(ct=function(n){function i(){return n.apply(this,arguments)||this}t(i,n);var s=i.prototype;return s.init=function(){var t=e((function*(){this.animationComponent=this.node.addComponent(f),this.initParams(),this.initStateMachines(),this.initAnimationEvent(),yield Promise.all(this.waitingList)}));return function(){return t.apply(this,arguments)}}(),s.initAnimationEvent=function(){var t=this;this.animationComponent.on(f.EventType.FINISHED,(function(){var e=t.animationComponent.defaultClip.name;["attack"].some((function(t){return e.includes(t)}))&&(t.node.getComponent(x).state=y.IDLE)}))},s.initParams=function(){this.params.set(L.IDLE,P()),this.params.set(L.ATTACK,P()),this.params.set(L.DEATH,P()),this.params.set(L.DIRECTION,w())},s.initStateMachines=function(){this.stateMachines.set(L.IDLE,new rt(this)),this.stateMachines.set(L.ATTACK,new ht(this)),this.stateMachines.set(L.DEATH,new lt(this))},s.run=function(){switch(this.currentState){case this.stateMachines.get(L.IDLE):case this.stateMachines.get(L.ATTACK):case this.stateMachines.get(L.DEATH):this.params.get(L.DEATH).value?this.currentState=this.stateMachines.get(L.DEATH):this.params.get(L.ATTACK).value?this.currentState=this.stateMachines.get(L.ATTACK):this.params.get(L.IDLE).value?this.currentState=this.stateMachines.get(L.IDLE):this.currentState=this.currentState;break;default:this.currentState=this.stateMachines.get(L.IDLE)}},i}(b))||ct;u._RF.pop(),u._RF.push({},"6a65eB7aJFB147ornLn6o5A","WoodenSkeletonManager",void 0);var Tt=(0,p.ccclass)("WoodenSkeletonManager")(pt=function(s){function a(){return s.apply(this,arguments)||this}t(a,s);var r=a.prototype;return r.init=function(){var t=e((function*(t){this.fsm=this.addComponent(ft),yield this.fsm.init(),s.prototype.init.call(this,t),n.Instance.on(g.PLAYER_MOVE_END,this.onAttack,this)}));return function(e){return t.apply(this,arguments)}}(),r.onDestroy=function(){s.prototype.onDestroy.call(this),n.Instance.off(g.PLAYER_MOVE_END,this.onAttack)},r.onAttack=function(){if(this.state!==y.DEATH){var t=i.Instance.player,e=t.targetX,s=t.targetY,a=t.state;(e===this.x&&Math.abs(s-this.y)<=1||s===this.y&&Math.abs(e-this.x)<=1)&&a!==y.DEATH&&a!==y.AIRDEATH?(this.state=y.ATTACK,n.Instance.emit(g.ATTACK_PLAYER,y.DEATH)):this.state=y.IDLE}},a}(k))||pt;u._RF.pop(),u._RF.push({},"2e19eBKUZNMtIFUU07cLdGH","IdleSubStateMachine",void 0);var vt="texture/player/idle",dt=function(e){function n(t){var n;return(n=e.call(this,t)||this).stateMachines.set(O.TOP,new H(t,vt+"/top",l.WrapMode.Loop)),n.stateMachines.set(O.BOTTOM,new H(t,vt+"/bottom",l.WrapMode.Loop)),n.stateMachines.set(O.LEFT,new H(t,vt+"/left",l.WrapMode.Loop)),n.stateMachines.set(O.RIGHT,new H(t,vt+"/right",l.WrapMode.Loop)),n}return t(n,e),n}(D);u._RF.pop(),u._RF.push({},"7474d3eV6pCmJD98KGLuzl7","AttackSubStateMachine",void 0);var Et="texture/player/attack",Mt=function(e){function n(t){var n;return(n=e.call(this,t)||this).stateMachines.set(O.TOP,new H(t,Et+"/top",l.WrapMode.Normal,G,[{frame:4*G,func:"onAttackShake",params:[C.TOP]}])),n.stateMachines.set(O.BOTTOM,new H(t,Et+"/bottom",l.WrapMode.Normal,G,[{frame:4*G,func:"onAttackShake",params:[C.BOTTOM]}])),n.stateMachines.set(O.LEFT,new H(t,Et+"/left",l.WrapMode.Normal,G,[{frame:4*G,func:"onAttackShake",params:[C.LEFT]}])),n.stateMachines.set(O.RIGHT,new H(t,Et+"/right",l.WrapMode.Normal,G,[{frame:4*G,func:"onAttackShake",params:[C.RIGHT]}])),n}return t(n,e),n}(D);u._RF.pop(),u._RF.push({},"c6610G/Sc1MPY5kaXWx4DW+","TurnRightSubStateMachine",void 0);var It="texture/player/turnright",mt=function(e){function n(t){var n;return(n=e.call(this,t)||this).stateMachines.set(O.TOP,new H(t,It+"/top")),n.stateMachines.set(O.BOTTOM,new H(t,It+"/bottom")),n.stateMachines.set(O.LEFT,new H(t,It+"/left")),n.stateMachines.set(O.RIGHT,new H(t,It+"/right")),n}return t(n,e),n}(D);u._RF.pop(),u._RF.push({},"e8831tv4YxNsrP4yymA60Fo","TurnLeftSubStateMachine",void 0);var Rt="texture/player/turnleft",Ot=function(e){function n(t){var n;return(n=e.call(this,t)||this).stateMachines.set(O.TOP,new H(t,Rt+"/top")),n.stateMachines.set(O.BOTTOM,new H(t,Rt+"/bottom")),n.stateMachines.set(O.LEFT,new H(t,Rt+"/left")),n.stateMachines.set(O.RIGHT,new H(t,Rt+"/right")),n}return t(n,e),n}(D);u._RF.pop(),u._RF.push({},"2b7dclgdN1O94F08lm/yoJb","DeathSubStateMachine",void 0);var Lt="texture/player/death",St=function(e){function n(t){var n;return(n=e.call(this,t)||this).stateMachines.set(O.TOP,new H(t,Lt+"/top")),n.stateMachines.set(O.BOTTOM,new H(t,Lt+"/bottom")),n.stateMachines.set(O.LEFT,new H(t,Lt+"/left")),n.stateMachines.set(O.RIGHT,new H(t,Lt+"/right")),n}return t(n,e),n}(D);u._RF.pop(),u._RF.push({},"3a504YKPHBOLZ380IDHrn1M","AirDeathSubStateMachine",void 0);var yt="texture/player/airdeath",gt=function(e){function n(t){var n;return(n=e.call(this,t)||this).stateMachines.set(O.TOP,new H(t,yt+"/top")),n.stateMachines.set(O.BOTTOM,new H(t,yt+"/bottom")),n.stateMachines.set(O.LEFT,new H(t,yt+"/left")),n.stateMachines.set(O.RIGHT,new H(t,yt+"/right")),n}return t(n,e),n}(D);u._RF.pop(),u._RF.push({},"4efe8U9XsVHkpeY7UrID8Xw","BlockFrontSubStateMachine",void 0);var Ct="texture/player/blockfront",At=function(e){function n(t){var n;return(n=e.call(this,t)||this).stateMachines.set(O.TOP,new H(t,Ct+"/top")),n.stateMachines.set(O.BOTTOM,new H(t,Ct+"/bottom")),n.stateMachines.set(O.LEFT,new H(t,Ct+"/left")),n.stateMachines.set(O.RIGHT,new H(t,Ct+"/right")),n}return t(n,e),n}(D);u._RF.pop(),u._RF.push({},"e1304HBmZlEpYNIfnXg25+h","BlockRightSubStateMachine",void 0);var Ft="texture/player/blockright",Kt=function(e){function n(t){var n;return(n=e.call(this,t)||this).stateMachines.set(O.TOP,new H(t,Ft+"/top")),n.stateMachines.set(O.BOTTOM,new H(t,Ft+"/bottom")),n.stateMachines.set(O.LEFT,new H(t,Ft+"/left")),n.stateMachines.set(O.RIGHT,new H(t,Ft+"/right")),n}return t(n,e),n}(D);u._RF.pop(),u._RF.push({},"5464eFNeUVGa7VqREhLbkVh","BlockTurnLeftSubStateMachine",void 0);var Bt="texture/player/blockturnleft",_t=function(e){function n(t){var n;return(n=e.call(this,t)||this).stateMachines.set(O.TOP,new H(t,Bt+"/top")),n.stateMachines.set(O.BOTTOM,new H(t,Bt+"/bottom")),n.stateMachines.set(O.LEFT,new H(t,Bt+"/left")),n.stateMachines.set(O.RIGHT,new H(t,Bt+"/right")),n}return t(n,e),n}(D);u._RF.pop(),u._RF.push({},"1ada5KTd7xMdr2DDlq4nefC","BlockBackSubStateMachine",void 0);var Ht="texture/player/blockback",Dt=function(e){function n(t){var n;return(n=e.call(this,t)||this).stateMachines.set(O.TOP,new H(t,Ht+"/top")),n.stateMachines.set(O.BOTTOM,new H(t,Ht+"/bottom")),n.stateMachines.set(O.LEFT,new H(t,Ht+"/left")),n.stateMachines.set(O.RIGHT,new H(t,Ht+"/right")),n}return t(n,e),n}(D);u._RF.pop(),u._RF.push({},"86c5dRpZ5NMg6i/8oLqtvEt","BlockTurnRightSubStateMachine",void 0);var Pt="texture/player/blockturnright",wt=function(e){function n(t){var n;return(n=e.call(this,t)||this).stateMachines.set(O.TOP,new H(t,Pt+"/top")),n.stateMachines.set(O.BOTTOM,new H(t,Pt+"/bottom")),n.stateMachines.set(O.LEFT,new H(t,Pt+"/left")),n.stateMachines.set(O.RIGHT,new H(t,Pt+"/right")),n}return t(n,e),n}(D);u._RF.pop(),u._RF.push({},"e2027B1tkxI8oltfoWrP4FT","BlockLeftSubStateMachine",void 0);var bt,kt="texture/player/blockleft",Nt=function(e){function n(t){var n;return(n=e.call(this,t)||this).stateMachines.set(O.TOP,new H(t,kt+"/top")),n.stateMachines.set(O.BOTTOM,new H(t,kt+"/bottom")),n.stateMachines.set(O.LEFT,new H(t,kt+"/left")),n.stateMachines.set(O.RIGHT,new H(t,kt+"/right")),n}return t(n,e),n}(D);u._RF.pop(),u._RF.push({},"af8b7y6r9NKrrGXEKamsXtk","PlayerStateMachine",void 0);var xt,Gt=p.ccclass,Ut=(p.property,Gt("PlayerStateMachine")(bt=function(n){function i(){return n.apply(this,arguments)||this}t(i,n);var s=i.prototype;return s.init=function(){var t=e((function*(){this.animationComponent=this.node.addComponent(f),this.initParams(),this.initStateMachines(),this.initAnimationEvent(),yield Promise.all(this.waitingList)}));return function(){return t.apply(this,arguments)}}(),s.initAnimationEvent=function(){var t=this;this.animationComponent.on(f.EventType.FINISHED,(function(){var e=t.animationComponent.defaultClip.name;["block","turn","attack"].some((function(t){return e.includes(t)}))&&(t.node.getComponent(x).state=y.IDLE)}))},s.initParams=function(){this.params.set(L.IDLE,P()),this.params.set(L.ATTACK,P()),this.params.set(L.TURNLEFT,P()),this.params.set(L.TURNRIGHT,P()),this.params.set(L.BLOCKFRONT,P()),this.params.set(L.BLOCKBACK,P()),this.params.set(L.BLOCKLEFT,P()),this.params.set(L.BLOCKRIGHT,P()),this.params.set(L.BLOCKTURNLEFT,P()),this.params.set(L.BLOCKTURNRIGHT,P()),this.params.set(L.DEATH,P()),this.params.set(L.AIRDEATH,P()),this.params.set(L.DIRECTION,w())},s.initStateMachines=function(){this.stateMachines.set(L.IDLE,new dt(this)),this.stateMachines.set(L.TURNLEFT,new Ot(this)),this.stateMachines.set(L.TURNRIGHT,new mt(this)),this.stateMachines.set(L.BLOCKFRONT,new At(this)),this.stateMachines.set(L.BLOCKBACK,new Dt(this)),this.stateMachines.set(L.BLOCKLEFT,new Nt(this)),this.stateMachines.set(L.BLOCKRIGHT,new Kt(this)),this.stateMachines.set(L.BLOCKTURNLEFT,new _t(this)),this.stateMachines.set(L.BLOCKTURNRIGHT,new wt(this)),this.stateMachines.set(L.ATTACK,new Mt(this)),this.stateMachines.set(L.DEATH,new St(this)),this.stateMachines.set(L.AIRDEATH,new gt(this))},s.run=function(){switch(this.currentState){case this.stateMachines.get(L.IDLE):case this.stateMachines.get(L.ATTACK):case this.stateMachines.get(L.TURNLEFT):case this.stateMachines.get(L.TURNRIGHT):case this.stateMachines.get(L.BLOCKTURNLEFT):case this.stateMachines.get(L.BLOCKTURNRIGHT):case this.stateMachines.get(L.BLOCKFRONT):case this.stateMachines.get(L.BLOCKBACK):case this.stateMachines.get(L.BLOCKLEFT):case this.stateMachines.get(L.BLOCKRIGHT):case this.stateMachines.get(L.DEATH):case this.stateMachines.get(L.AIRDEATH):this.params.get(L.DEATH).value?this.currentState=this.stateMachines.get(L.DEATH):this.params.get(L.AIRDEATH).value?this.currentState=this.stateMachines.get(L.AIRDEATH):this.params.get(L.TURNLEFT).value?this.currentState=this.stateMachines.get(L.TURNLEFT):this.params.get(L.TURNRIGHT).value?this.currentState=this.stateMachines.get(L.TURNRIGHT):this.params.get(L.BLOCKFRONT).value?this.currentState=this.stateMachines.get(L.BLOCKFRONT):this.params.get(L.BLOCKBACK).value?this.currentState=this.stateMachines.get(L.BLOCKBACK):this.params.get(L.BLOCKLEFT).value?this.currentState=this.stateMachines.get(L.BLOCKLEFT):this.params.get(L.BLOCKRIGHT).value?this.currentState=this.stateMachines.get(L.BLOCKRIGHT):this.params.get(L.BLOCKTURNLEFT).value?this.currentState=this.stateMachines.get(L.BLOCKTURNLEFT):this.params.get(L.BLOCKTURNRIGHT).value?this.currentState=this.stateMachines.get(L.BLOCKTURNRIGHT):this.params.get(L.ATTACK).value?this.currentState=this.stateMachines.get(L.ATTACK):this.params.get(L.IDLE).value?this.currentState=this.stateMachines.get(L.IDLE):this.currentState=this.currentState;break;default:this.currentState=this.stateMachines.get(L.IDLE)}},i}(b))||bt);u._RF.pop(),u._RF.push({},"d061bV0s7dMvL4lQmXdfLpY","PlayerManager",void 0);var Yt,Wt=(0,p.ccclass)("PlayerManager")(xt=function(r){function o(){for(var t,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t=r.call.apply(r,[this].concat(n))||this,s(a(t),"speed",.1),s(a(t),"targetX",void 0),s(a(t),"targetY",void 0),s(a(t),"isMoving",!1),t}t(o,r);var h=o.prototype;return h.init=function(){var t=e((function*(t){this.fsm=this.addComponent(Ut),yield this.fsm.init(),r.prototype.init.call(this,t),this.targetX=this.x,this.targetY=this.y,n.Instance.on(g.PLAYER_CTRL,this.inputProcess,this),n.Instance.on(g.ATTACK_PLAYER,this.onDead,this)}));return function(e){return t.apply(this,arguments)}}(),h.onDestroy=function(){r.prototype.onDestroy.call(this),n.Instance.off(g.PLAYER_CTRL,this.inputProcess),n.Instance.off(g.ATTACK_PLAYER,this.onDead)},h.update=function(){this.updateXY(),r.prototype.update.call(this)},h.updateXY=function(){this.targetX<this.x?this.x-=this.speed:this.targetX>this.x&&(this.x+=this.speed),this.targetY<this.y?this.y-=this.speed:this.targetY>this.y&&(this.y+=this.speed),Math.abs(this.targetX-this.x)<.01&&Math.abs(this.targetY-this.y)<.01&&this.isMoving&&(this.x=this.targetX,this.y=this.targetY,this.isMoving=!1,n.Instance.emit(g.PLAYER_MOVE_END))},h.onDead=function(t){this.state=t},h.onAttackShake=function(t){n.Instance.emit(g.SCREEN_SHAKE,t)},h.inputProcess=function(t){if(!this.isMoving&&this.state!==y.DEATH&&this.state!==y.AIRDEATH&&this.state!==y.ATTACK){var e=this.willAttack(t);if(e)return n.Instance.emit(g.RECORD_STEP),this.state=y.ATTACK,n.Instance.emit(g.ATTACK_ENEMY,e),n.Instance.emit(g.PLAYER_MOVE_END),void n.Instance.emit(g.DOOR_OPEN);this.willBlock(t)?t===A.TOP?n.Instance.emit(g.SCREEN_SHAKE,C.TOP):t===A.BOTTOM?n.Instance.emit(g.SCREEN_SHAKE,C.BOTTOM):t===A.LEFT?n.Instance.emit(g.SCREEN_SHAKE,C.LEFT):t===A.RIGHT?n.Instance.emit(g.SCREEN_SHAKE,C.RIGHT):t===A.TURNLEFT&&this.direction===O.TOP?n.Instance.emit(g.SCREEN_SHAKE,C.LEFT):t===A.TURNLEFT&&this.direction===O.LEFT?n.Instance.emit(g.SCREEN_SHAKE,C.BOTTOM):t===A.TURNLEFT&&this.direction===O.BOTTOM?n.Instance.emit(g.SCREEN_SHAKE,C.RIGHT):t===A.TURNLEFT&&this.direction===O.RIGHT?n.Instance.emit(g.SCREEN_SHAKE,C.TOP):t===A.TURNRIGHT&&this.direction===O.TOP?n.Instance.emit(g.SCREEN_SHAKE,C.RIGHT):t===A.TURNRIGHT&&this.direction===O.LEFT?n.Instance.emit(g.SCREEN_SHAKE,C.TOP):t===A.TURNRIGHT&&this.direction===O.BOTTOM?n.Instance.emit(g.SCREEN_SHAKE,C.LEFT):t===A.TURNRIGHT&&this.direction===O.RIGHT&&n.Instance.emit(g.SCREEN_SHAKE,C.BOTTOM):this.move(t)}},h.move=function(t){n.Instance.emit(g.RECORD_STEP),t===A.TOP?(this.targetY-=1,this.isMoving=!0,this.showSmoke(O.TOP)):t===A.BOTTOM?(this.targetY+=1,this.isMoving=!0,this.showSmoke(O.BOTTOM)):t===A.LEFT?(this.targetX-=1,this.isMoving=!0,this.showSmoke(O.LEFT)):t===A.RIGHT?(this.targetX+=1,this.isMoving=!0,this.showSmoke(O.RIGHT)):t===A.TURNLEFT?(this.direction===O.TOP?this.direction=O.LEFT:this.direction===O.BOTTOM?this.direction=O.RIGHT:this.direction===O.LEFT?this.direction=O.BOTTOM:this.direction===O.RIGHT&&(this.direction=O.TOP),this.state=y.TURNLEFT,n.Instance.emit(g.PLAYER_MOVE_END)):t===A.TURNRIGHT&&(this.direction===O.TOP?this.direction=O.RIGHT:this.direction===O.BOTTOM?this.direction=O.LEFT:this.direction===O.LEFT?this.direction=O.TOP:this.direction===O.RIGHT&&(this.direction=O.BOTTOM),this.state=y.TURNRIGHT,n.Instance.emit(g.PLAYER_MOVE_END))},h.showSmoke=function(t){n.Instance.emit(g.SHOW_SMOKE,this.x,this.y,t)},h.willAttack=function(t){for(var e=i.Instance.enemies.filter((function(t){return t.state!==y.DEATH})),n=0;n<e.length;n++){var s=e[n],a=s.x,r=s.y,o=s.id;if(this.direction===O.TOP&&t===A.TOP&&r===this.targetY-2&&a===this.x)return o;if(this.direction===O.BOTTOM&&t===A.BOTTOM&&r===this.targetY+2&&a===this.x)return o;if(this.direction===O.LEFT&&t===A.LEFT&&a===this.targetX-2&&r===this.y)return o;if(this.direction===O.RIGHT&&t===A.RIGHT&&a===this.targetX+2&&r===this.y)return o}return""},h.willBlock=function(t){var e=this.targetX,n=this.targetY,s=this.direction,a=i.Instance.tileInfo,r=i.Instance.enemies.filter((function(t){return t.state!==y.DEATH})),o=i.Instance.door||{},h=o.x,c=o.y,u=o.state,l=i.Instance.bursts.filter((function(t){return t.state!==y.DEATH})),p=i.Instance,f=p.mapRowCount,T=p.mapColumnCount;if(t===A.TOP){var v=n-1;if(s===O.TOP){var d,E;if(v<0)return this.state=y.BLOCKFRONT,!0;var M=n-2,I=null===(d=a[e])||void 0===d?void 0:d[v],m=null===(E=a[e])||void 0===E?void 0:E[M];if((h===e&&c===v||h===e&&c===M)&&u!==y.DEATH)return this.state=y.BLOCKFRONT,!0;for(var R=0;R<r.length;R++){var L=r[R],S=L.x,g=L.y;if(S===e&&g===M||S===e&&g===v)return this.state=y.BLOCKFRONT,!0}if(l.some((function(t){return t.x===e&&t.y===v}))&&(!m||m.turnable))return!1;if(!I||!I.moveable||m&&!m.turnable)return this.state=y.BLOCKFRONT,!0}else if(s===O.BOTTOM){var C,F;if(v<0)return this.state=y.BLOCKBACK,!0;var K=n,B=null===(C=a[e])||void 0===C?void 0:C[v],_=null===(F=a[e])||void 0===F?void 0:F[K];if((h===e&&c===v||h===e&&c===K)&&u!==y.DEATH)return this.state=y.BLOCKBACK,!0;for(var H=0;H<r.length;H++){var D=r[H],P=D.x,w=D.y;if(P===e&&w===v)return this.state=y.BLOCKBACK,!0}if(l.some((function(t){return t.x===e&&t.y===v}))&&(!_||_.turnable))return!1;if(!B||!B.moveable||_&&!_.turnable)return this.state=y.BLOCKBACK,!0}else if(s===O.LEFT){var b,k;if(v<0)return this.state=y.BLOCKRIGHT,!0;var N=e-1,x=n-1,G=null===(b=a[e])||void 0===b?void 0:b[v],U=null===(k=a[N])||void 0===k?void 0:k[x];if((h===e&&c===v||h===N&&c===x)&&u!==y.DEATH)return this.state=y.BLOCKRIGHT,!0;for(var Y=0;Y<r.length;Y++){var W=r[Y],V=W.x,X=W.y;if(V===e&&X===v||V===N&&X===x)return this.state=y.BLOCKRIGHT,!0}if(l.some((function(t){return t.x===e&&t.y===v}))&&(!U||U.turnable))return!1;if(!G||!G.moveable||U&&!U.turnable)return this.state=y.BLOCKRIGHT,!0}else if(s===O.RIGHT){var Z,z;if(v<0)return this.state=y.BLOCKLEFT,!0;var j=e+1,q=n-1,J=null===(Z=a[e])||void 0===Z?void 0:Z[v],Q=null===(z=a[j])||void 0===z?void 0:z[q];if((h===e&&c===v||h===j&&c===q)&&u!==y.DEATH)return this.state=y.BLOCKLEFT,!0;for(var $=0;$<r.length;$++){var tt=r[$],et=tt.x,nt=tt.y;if(et===e&&nt===v||et===j&&nt===q)return this.state=y.BLOCKLEFT,!0}if(l.some((function(t){return t.x===e&&t.y===v}))&&(!Q||Q.turnable))return!1;if(!J||!J.moveable||Q&&!Q.turnable)return this.state=y.BLOCKLEFT,!0}}else if(t===A.BOTTOM){var it=n+1;if(s===O.TOP){var st,at;if(it>T-1)return this.state=y.BLOCKBACK,!0;var rt=n,ot=null===(st=a[e])||void 0===st?void 0:st[it],ht=null===(at=a[e])||void 0===at?void 0:at[rt];if((h===e&&c===it||h===e&&c===rt)&&u!==y.DEATH)return this.state=y.BLOCKBACK,!0;for(var ct=0;ct<r.length;ct++){var ut=r[ct],lt=ut.x,pt=ut.y;if(lt===e&&pt===it)return this.state=y.BLOCKBACK,!0}if(l.some((function(t){return t.x===e&&t.y===it}))&&(!ht||ht.turnable))return!1;if(!ot||!ot.moveable||ht&&!ht.turnable)return this.state=y.BLOCKBACK,!0}else if(s===O.BOTTOM){var ft,Tt;if(it>T-1)return this.state=y.BLOCKFRONT,!0;var vt=n+2,dt=null===(ft=a[e])||void 0===ft?void 0:ft[it],Et=null===(Tt=a[e])||void 0===Tt?void 0:Tt[vt];if((h===e&&c===it||h===e&&c===vt)&&u!==y.DEATH)return this.state=y.BLOCKFRONT,!0;for(var Mt=0;Mt<r.length;Mt++){var It=r[Mt],mt=It.x,Rt=It.y;if(mt===e&&Rt===vt||mt===e&&Rt===it)return this.state=y.BLOCKFRONT,!0}if(l.some((function(t){return t.x===e&&t.y===it}))&&(!Et||Et.turnable))return!1;if(!dt||!dt.moveable||Et&&!Et.turnable)return this.state=y.BLOCKFRONT,!0}else if(s===O.LEFT){var Ot,Lt;if(it>T-1)return this.state=y.BLOCKLEFT,!0;var St=e-1,yt=n+1,gt=null===(Ot=a[e])||void 0===Ot?void 0:Ot[it],Ct=null===(Lt=a[St])||void 0===Lt?void 0:Lt[yt];if((h===e&&c===it||h===St&&c===yt)&&u!==y.DEATH)return this.state=y.BLOCKLEFT,!0;for(var At=0;At<r.length;At++){var Ft=r[At],Kt=Ft.x,Bt=Ft.y;if(Kt===e&&Bt===it||Kt===St&&Bt===yt)return this.state=y.BLOCKLEFT,!0}if(l.some((function(t){return t.x===e&&t.y===it}))&&(!Ct||Ct.turnable))return!1;if(!gt||!gt.moveable||Ct&&!Ct.turnable)return this.state=y.BLOCKLEFT,!0}else if(s===O.RIGHT){var _t,Ht;if(it>T-1)return this.state=y.BLOCKRIGHT,!0;var Dt=e+1,Pt=n+1,wt=null===(_t=a[e])||void 0===_t?void 0:_t[it],bt=null===(Ht=a[Dt])||void 0===Ht?void 0:Ht[Pt];if((h===e&&c===it||h===Dt&&c===Pt)&&u!==y.DEATH)return this.state=y.BLOCKRIGHT,!0;for(var kt=0;kt<r.length;kt++){var Nt=r[kt],xt=Nt.x,Gt=Nt.y;if(xt===e&&Gt===it||xt===Dt&&Gt===Pt)return this.state=y.BLOCKRIGHT,!0}if(l.some((function(t){return t.x===e&&t.y===it}))&&(!bt||bt.turnable))return!1;if(!wt||!wt.moveable||bt&&!bt.turnable)return this.state=y.BLOCKRIGHT,!0}}else if(t===A.LEFT){var Ut=e-1;if(s===O.TOP){var Yt,Wt;if(Ut<0)return this.state=y.BLOCKLEFT,!0;var Vt=e-1,Xt=n-1,Zt=null===(Yt=a[Ut])||void 0===Yt?void 0:Yt[n],zt=null===(Wt=a[Vt])||void 0===Wt?void 0:Wt[Xt];if((h===Ut&&c===n||h===Vt&&c===Xt)&&u!==y.DEATH)return this.state=y.BLOCKLEFT,!0;for(var jt=0;jt<r.length;jt++){var qt=r[jt],Jt=qt.x,Qt=qt.y;if(Jt===Ut&&Qt===n||Jt===Vt&&Qt===Xt)return this.state=y.BLOCKLEFT,!0}if(l.some((function(t){return t.x===Ut&&t.y===n}))&&(!zt||zt.turnable))return!1;if(!Zt||!Zt.moveable||zt&&!zt.turnable)return this.state=y.BLOCKLEFT,!0}else if(s===O.BOTTOM){var $t,te;if(Ut<0)return this.state=y.BLOCKRIGHT,!0;var ee=e-1,ne=n+1,ie=null===($t=a[Ut])||void 0===$t?void 0:$t[n],se=null===(te=a[ee])||void 0===te?void 0:te[ne];if((h===Ut&&c===n||h===ee&&c===ne)&&u!==y.DEATH)return this.state=y.BLOCKRIGHT,!0;for(var ae=0;ae<r.length;ae++){var re=r[ae],oe=re.x,he=re.y;if(oe===Ut&&he===n||oe===ee&&he===ne)return this.state=y.BLOCKRIGHT,!0}if(l.some((function(t){return t.x===Ut&&t.y===n}))&&(!se||se.turnable))return!1;if(!ie||!ie.moveable||se&&!se.turnable)return this.state=y.BLOCKRIGHT,!0}else if(s===O.LEFT){var ce,ue;if(Ut<0)return this.state=y.BLOCKFRONT,!0;var le=e-2,pe=null===(ce=a[Ut])||void 0===ce?void 0:ce[n],fe=null===(ue=a[le])||void 0===ue?void 0:ue[n];if((h===Ut&&c===n||h===le&&c===n)&&u!==y.DEATH)return this.state=y.BLOCKFRONT,!0;for(var Te=0;Te<r.length;Te++){var ve=r[Te],de=ve.x,Ee=ve.y;if(de===Ut&&Ee===n||de===le&&Ee===n)return this.state=y.BLOCKFRONT,!0}if(l.some((function(t){return t.x===Ut&&t.y===n}))&&(!fe||fe.turnable))return!1;if(!pe||!pe.moveable||fe&&!fe.turnable)return this.state=y.BLOCKFRONT,!0}else if(s===O.RIGHT){var Me,Ie;if(Ut<0)return this.state=y.BLOCKBACK,!0;var me=e,Re=null===(Me=a[Ut])||void 0===Me?void 0:Me[n],Oe=null===(Ie=a[me])||void 0===Ie?void 0:Ie[n];if((h===Ut&&c===n||h===me&&c===n)&&u!==y.DEATH)return this.state=y.BLOCKBACK,!0;for(var Le=0;Le<r.length;Le++){var Se=r[Le],ye=Se.x,ge=Se.y;if(ye===Ut&&ge===n)return this.state=y.BLOCKBACK,!0}if(l.some((function(t){return t.x===Ut&&t.y===n}))&&(!Oe||Oe.turnable))return!1;if(!Re||!Re.moveable||Oe&&!Oe.turnable)return this.state=y.BLOCKBACK,!0}}else if(t===A.RIGHT){var Ce=e+1;if(s===O.TOP){var Ae,Fe;if(Ce>f-1)return this.state=y.BLOCKRIGHT,!0;var Ke=e+1,Be=n-1,_e=null===(Ae=a[Ce])||void 0===Ae?void 0:Ae[n],He=null===(Fe=a[Ke])||void 0===Fe?void 0:Fe[Be];if((h===Ce&&c===n||h===Ke&&c===Be)&&u!==y.DEATH)return this.state=y.BLOCKRIGHT,!0;for(var De=0;De<r.length;De++){var Pe=r[De],we=Pe.x,be=Pe.y;if(we===Ce&&be===n||we===Ke&&be===Be)return this.state=y.BLOCKRIGHT,!0}if(l.some((function(t){return t.x===Ce&&t.y===n}))&&(!He||He.turnable))return!1;if(!_e||!_e.moveable||He&&!He.turnable)return this.state=y.BLOCKRIGHT,!0}else if(s===O.BOTTOM){var ke,Ne;if(Ce>f-1)return this.state=y.BLOCKLEFT,!0;var xe=e+1,Ge=n+1,Ue=null===(ke=a[Ce])||void 0===ke?void 0:ke[n],Ye=null===(Ne=a[xe])||void 0===Ne?void 0:Ne[Ge];if((h===Ce&&c===n||h===xe&&c===Ge)&&u!==y.DEATH)return this.state=y.BLOCKLEFT,!0;for(var We=0;We<r.length;We++){var Ve=r[We],Xe=Ve.x,Ze=Ve.y;if(Xe===Ce&&Ze===n||Xe===xe&&Ze===Ge)return this.state=y.BLOCKLEFT,!0}if(l.some((function(t){return t.x===Ce&&t.y===n}))&&(!Ye||Ye.turnable))return!1;if(!Ue||!Ue.moveable||Ye&&!Ye.turnable)return this.state=y.BLOCKLEFT,!0}else if(s===O.LEFT){var ze,je;if(Ce>f-1)return this.state=y.BLOCKBACK,!0;var qe=e,Je=null===(ze=a[Ce])||void 0===ze?void 0:ze[n],Qe=null===(je=a[qe])||void 0===je?void 0:je[n];if((h===Ce&&c===n||h===qe&&c===n)&&u!==y.DEATH)return this.state=y.BLOCKBACK,!0;for(var $e=0;$e<r.length;$e++){var tn=r[$e],en=tn.x,nn=tn.y;if(en===Ce&&nn===n)return this.state=y.BLOCKBACK,!0}if(l.some((function(t){return t.x===Ce&&t.y===n}))&&(!Qe||Qe.turnable))return!1;if(!Je||!Je.moveable||Qe&&!Qe.turnable)return this.state=y.BLOCKBACK,!0}else if(s===O.RIGHT){var sn,an;if(Ce>f-1)return this.state=y.BLOCKFRONT,!0;var rn=e+2,on=null===(sn=a[Ce])||void 0===sn?void 0:sn[n],hn=null===(an=a[rn])||void 0===an?void 0:an[n];if((h===Ce&&c===n||h===rn&&c===n)&&u!==y.DEATH)return this.state=y.BLOCKFRONT,!0;for(var cn=0;cn<r.length;cn++){var un=r[cn],ln=un.x,pn=un.y;if(ln===Ce&&pn===n||ln===rn&&pn===n)return this.state=y.BLOCKFRONT,!0}if(l.some((function(t){return t.x===Ce&&t.y===n}))&&(!hn||hn.turnable))return!1;if(!on||!on.moveable||hn&&!hn.turnable)return this.state=y.BLOCKFRONT,!0}}else if(t===A.TURNLEFT){var fn,Tn,vn,dn,En,Mn,In,mn;if(s===O.TOP?(In=n-1,mn=e-1):s===O.BOTTOM?(In=n+1,mn=e+1):s===O.LEFT?(In=n+1,mn=e-1):s===O.RIGHT&&(In=n-1,mn=e+1),(h===e&&c===In||h===mn&&c===n||h===mn&&c===In)&&u!==y.DEATH)return this.state=y.BLOCKTURNLEFT,!0;for(var Rn=0;Rn<r.length;Rn++){var On=r[Rn],Ln=On.x,Sn=On.y;if(Ln===mn&&Sn===n)return this.state=y.BLOCKTURNLEFT,!0;if(Ln===mn&&Sn===In)return this.state=y.BLOCKTURNLEFT,!0;if(Ln===e&&Sn===In)return this.state=y.BLOCKTURNLEFT,!0}if((null===(fn=a[e])||void 0===fn?void 0:fn[In])&&!(null===(Tn=a[e])||void 0===Tn?void 0:Tn[In].turnable)||(null===(vn=a[mn])||void 0===vn?void 0:vn[n])&&!(null===(dn=a[mn])||void 0===dn?void 0:dn[n].turnable)||(null===(En=a[mn])||void 0===En?void 0:En[In])&&!(null===(Mn=a[mn])||void 0===Mn?void 0:Mn[In].turnable))return this.state=y.BLOCKTURNLEFT,!0}else if(t===A.TURNRIGHT){var yn,gn,Cn,An,Fn,Kn,Bn,_n;if(s===O.TOP?(_n=n-1,Bn=e+1):s===O.BOTTOM?(_n=n+1,Bn=e-1):s===O.LEFT?(_n=n-1,Bn=e-1):s===O.RIGHT&&(_n=n+1,Bn=e+1),(h===e&&c===_n||h===Bn&&c===n||h===Bn&&c===_n)&&u!==y.DEATH)return this.state=y.BLOCKTURNRIGHT,!0;for(var Hn=0;Hn<r.length;Hn++){var Dn=r[Hn],Pn=Dn.x,wn=Dn.y;if(Pn===Bn&&wn===n)return this.state=y.BLOCKTURNRIGHT,!0;if(Pn===Bn&&wn===_n)return this.state=y.BLOCKTURNRIGHT,!0;if(Pn===e&&wn===_n)return this.state=y.BLOCKTURNRIGHT,!0}if((null===(yn=a[e])||void 0===yn?void 0:yn[_n])&&!(null===(gn=a[e])||void 0===gn?void 0:gn[_n].turnable)||(null===(Cn=a[Bn])||void 0===Cn?void 0:Cn[n])&&!(null===(An=a[Bn])||void 0===An?void 0:An[n].turnable)||(null===(Fn=a[Bn])||void 0===Fn?void 0:Fn[_n])&&!(null===(Kn=a[Bn])||void 0===Kn?void 0:Kn[_n].turnable))return this.state=y.BLOCKTURNRIGHT,!0}return!1},o}(x))||xt;u._RF.pop(),u._RF.push({},"f9917jX+zdHIbvW8s3LWI1Z","TileMapManager",void 0);var Vt=(0,p.ccclass)("TileMapManager")(Yt=function(n){function s(){return n.apply(this,arguments)||this}return t(s,n),s.prototype.init=function(){var t=e((function*(){var t=this,e=i.Instance.mapInfo;i.Instance.tileInfo=[];for(var n=yield r.Instance.loadDir("texture/tile/tile/"),s=0;s<e.length;s++){var a=e[s];i.Instance.tileInfo[s]=[];for(var o=function(e){var r=a[e];if(null===r.src||null===r.type)return"continue";var o=r.src;(1===o&&s%2==0&&e%2==1||5===o&&s%2==0&&e%2==1||9===o&&s%2==0&&e%2==1)&&(o+=V(0,4));var h="tile ("+o+")",c=n.find((function(t){return t.name===h}))||n[0],u=r.type,l=X(),p=l.addComponent(U);p.init(u,c,s,e),l.setParent(t.node),i.Instance.tileInfo[s][e]=p},h=0;h<a.length;h++)o(h)}}));return function(){return t.apply(this,arguments)}}(),s}(T))||Yt;u._RF.pop(),u._RF.push({},"241ddE/sV5ESagkkGGHgmSq","DeathSubStateMachine",void 0);var Xt="texture/door/death",Zt=function(e){function n(t){var n;return(n=e.call(this,t)||this).stateMachines.set(O.TOP,new H(t,""+Xt)),n.stateMachines.set(O.BOTTOM,new H(t,""+Xt)),n.stateMachines.set(O.LEFT,new H(t,""+Xt)),n.stateMachines.set(O.RIGHT,new H(t,""+Xt)),n}return t(n,e),n}(D);u._RF.pop(),u._RF.push({},"cbd34mDWIlKzpdLYgdIHQFe","IdleSubStateMachine",void 0);var zt,jt="texture/door/idle",qt=function(e){function n(t){var n;return(n=e.call(this,t)||this).stateMachines.set(O.TOP,new H(t,jt+"/top")),n.stateMachines.set(O.BOTTOM,new H(t,jt+"/top")),n.stateMachines.set(O.LEFT,new H(t,jt+"/left")),n.stateMachines.set(O.RIGHT,new H(t,jt+"/left")),n}return t(n,e),n}(D);u._RF.pop(),u._RF.push({},"affe7BshsJIJJp5jesrLCoH","DoorStateMachine",void 0);var Jt,Qt=(0,p.ccclass)("DoorStateMachine")(zt=function(n){function i(){return n.apply(this,arguments)||this}t(i,n);var s=i.prototype;return s.init=function(){var t=e((function*(){this.animationComponent=this.node.addComponent(f),this.initParams(),this.initStateMachines(),this.initAnimationEvent(),yield Promise.all(this.waitingList)}));return function(){return t.apply(this,arguments)}}(),s.initAnimationEvent=function(){},s.initParams=function(){this.params.set(L.IDLE,P()),this.params.set(L.DEATH,P()),this.params.set(L.DIRECTION,w())},s.initStateMachines=function(){this.stateMachines.set(L.IDLE,new qt(this)),this.stateMachines.set(L.DEATH,new Zt(this))},s.run=function(){switch(this.currentState){case this.stateMachines.get(L.IDLE):case this.stateMachines.get(L.DEATH):this.params.get(L.DEATH).value?this.currentState=this.stateMachines.get(L.DEATH):this.params.get(L.IDLE).value?this.currentState=this.stateMachines.get(L.IDLE):this.currentState=this.currentState;break;default:this.currentState=this.stateMachines.get(L.IDLE)}},i}(b))||zt;u._RF.pop(),u._RF.push({},"85323nSpM5Cx4bEz6w7N8L7","DoorManager",void 0);var $t,te=(0,p.ccclass)("DoorManager")(Jt=function(s){function a(){return s.apply(this,arguments)||this}t(a,s);var r=a.prototype;return r.init=function(){var t=e((function*(t){this.fsm=this.addComponent(Qt),yield this.fsm.init(),s.prototype.init.call(this,t),n.Instance.on(g.DOOR_OPEN,this.onOpen,this)}));return function(e){return t.apply(this,arguments)}}(),r.onDestroy=function(){s.prototype.onDestroy.call(this),n.Instance.off(g.DOOR_OPEN,this.onOpen)},r.onOpen=function(){i.Instance.enemies.every((function(t){return t.state===y.DEATH}))&&this.state!==y.DEATH&&(this.state=y.DEATH)},a}(x))||Jt;u._RF.pop(),u._RF.push({},"3c046oDyAtHFKR0Y1cdWBz3","BurstStateMachine",void 0);var ee,ne=p.ccclass,ie="texture/burst",se=ne("BurstStateMachine")($t=function(n){function i(){return n.apply(this,arguments)||this}t(i,n);var s=i.prototype;return s.init=function(){var t=e((function*(){this.animationComponent=this.node.addComponent(f),this.initParams(),this.initStateMachines(),this.initAnimationEvent(),yield Promise.all(this.waitingList)}));return function(){return t.apply(this,arguments)}}(),s.initAnimationEvent=function(){},s.initParams=function(){this.params.set(L.IDLE,P()),this.params.set(L.ATTACK,P()),this.params.set(L.DEATH,P()),this.params.set(L.DIRECTION,w())},s.initStateMachines=function(){this.stateMachines.set(L.IDLE,new H(this,ie+"/idle")),this.stateMachines.set(L.ATTACK,new H(this,ie+"/attack")),this.stateMachines.set(L.DEATH,new H(this,ie+"/death"))},s.run=function(){switch(this.currentState){case this.stateMachines.get(L.IDLE):case this.stateMachines.get(L.ATTACK):case this.stateMachines.get(L.DEATH):this.params.get(L.DEATH).value?this.currentState=this.stateMachines.get(L.DEATH):this.params.get(L.ATTACK).value?this.currentState=this.stateMachines.get(L.ATTACK):this.params.get(L.IDLE).value?this.currentState=this.stateMachines.get(L.IDLE):this.currentState=this.currentState;break;default:this.currentState=this.stateMachines.get(L.IDLE)}},i}(b))||$t;u._RF.pop(),u._RF.push({},"9bc2amc2ixEialGuyRG6zPa","BurstManager",void 0);var ae=(0,p.ccclass)("BurstManager")(ee=function(s){function a(){return s.apply(this,arguments)||this}t(a,s);var r=a.prototype;return r.init=function(){var t=e((function*(t){this.fsm=this.addComponent(se),yield this.fsm.init(),s.prototype.init.call(this,t),this.transform=this.getComponent(v),this.transform.setContentSize(Y,W),n.Instance.on(g.PLAYER_MOVE_END,this.onBurst,this)}));return function(e){return t.apply(this,arguments)}}(),r.onDestroy=function(){s.prototype.onDestroy.call(this),n.Instance.off(g.PLAYER_MOVE_END,this.onBurst)},r.update=function(){this.node.setPosition(this.x*Y,-this.y*W)},r.onBurst=function(){if(this.state!==y.DEATH){var t=i.Instance.player,e=t.targetX,s=t.targetY;this.x===e&&this.y===s&&this.state===y.IDLE?this.state=y.ATTACK:this.state===y.ATTACK&&(this.state=y.DEATH,n.Instance.emit(g.SCREEN_SHAKE,C.BOTTOM),this.x===e&&this.y===s&&n.Instance.emit(g.ATTACK_PLAYER,y.AIRDEATH))}},a}(x))||ee;u._RF.pop(),u._RF.push({},"1a656Wl6thKsaHfvJNDKrED","SpikesFourSubStateMachine",void 0);var re="texture/spikes/spikesfour",oe=function(e){function n(t){var n;return(n=e.call(this,t)||this).stateMachines.set(F.ZERO,new H(t,re+"/zero")),n.stateMachines.set(F.ONE,new H(t,re+"/one")),n.stateMachines.set(F.TWO,new H(t,re+"/two")),n.stateMachines.set(F.THREE,new H(t,re+"/three")),n.stateMachines.set(F.FOUR,new H(t,re+"/four")),n.stateMachines.set(F.FIVE,new H(t,re+"/five")),n}return t(n,e),n}(st);u._RF.pop(),u._RF.push({},"81558fwqMVG7YVpFd1tj//7","SpikesOneSubStateMachine",void 0);var he="texture/spikes/spikesone",ce=function(e){function n(t){var n;return(n=e.call(this,t)||this).stateMachines.set(F.ZERO,new H(t,he+"/zero")),n.stateMachines.set(F.ONE,new H(t,he+"/one")),n.stateMachines.set(F.TWO,new H(t,he+"/two")),n}return t(n,e),n}(st);u._RF.pop(),u._RF.push({},"c46f8exu2RF8qwIi04u5ENM","SpikesThreeSubStateMachine",void 0);var ue="texture/spikes/spikesthree",le=function(e){function n(t){var n;return(n=e.call(this,t)||this).stateMachines.set(F.ZERO,new H(t,ue+"/zero")),n.stateMachines.set(F.ONE,new H(t,ue+"/one")),n.stateMachines.set(F.TWO,new H(t,ue+"/two")),n.stateMachines.set(F.THREE,new H(t,ue+"/three")),n.stateMachines.set(F.FOUR,new H(t,ue+"/four")),n}return t(n,e),n}(st);u._RF.pop(),u._RF.push({},"57709XdX1tDnobcQimju197","SpikesTwoSubStateMachine",void 0);var pe,fe="texture/spikes/spikestwo",Te=function(e){function n(t){var n;return(n=e.call(this,t)||this).stateMachines.set(F.ZERO,new H(t,fe+"/zero")),n.stateMachines.set(F.ONE,new H(t,fe+"/one")),n.stateMachines.set(F.TWO,new H(t,fe+"/two")),n.stateMachines.set(F.THREE,new H(t,fe+"/three")),n}return t(n,e),n}(st);u._RF.pop(),u._RF.push({},"f41d5wj7o9DuJfAZ4w7iIfV","SpikesStateMachine",void 0);var ve,de=(0,p.ccclass)("SpikesStateMachine")(pe=function(n){function i(){return n.apply(this,arguments)||this}t(i,n);var s=i.prototype;return s.init=function(){var t=e((function*(){this.animationComponent=this.node.addComponent(f),this.initParams(),this.initStateMachines(),this.initAnimationEvent(),yield Promise.all(this.waitingList)}));return function(){return t.apply(this,arguments)}}(),s.initAnimationEvent=function(){var t=this;this.animationComponent.on(f.EventType.FINISHED,(function(){var e=t.animationComponent.defaultClip.name,n=t.params.get(L.SPIKES_TOTAL_COUNT).value;(n===K.SPIKES_ONE&&e.includes("spikesone/two")||n===K.SPIKES_TWO&&e.includes("spikestwo/three")||n===K.SPIKES_THREE&&e.includes("spikesthree/four")||n===K.SPIKES_FOUR&&e.includes("spikesfour/five"))&&t.node.getComponent(Ee).backZero()}))},s.initParams=function(){this.params.set(L.SPIKES_TOTAL_COUNT,w()),this.params.set(L.SPIKES_CUR_COUNT,w())},s.initStateMachines=function(){this.stateMachines.set(B.SPIKES_ONE,new ce(this)),this.stateMachines.set(B.SPIKES_TWO,new Te(this)),this.stateMachines.set(B.SPIKES_THREE,new le(this)),this.stateMachines.set(B.SPIKES_FOUR,new oe(this))},s.run=function(){var t=this.params.get(L.SPIKES_TOTAL_COUNT).value;switch(this.currentState){case this.stateMachines.get(B.SPIKES_ONE):case this.stateMachines.get(B.SPIKES_TWO):case this.stateMachines.get(B.SPIKES_THREE):case this.stateMachines.get(B.SPIKES_FOUR):t===K.SPIKES_ONE?this.currentState=this.stateMachines.get(B.SPIKES_ONE):t===K.SPIKES_TWO?this.currentState=this.stateMachines.get(B.SPIKES_TWO):t===K.SPIKES_THREE?this.currentState=this.stateMachines.get(B.SPIKES_THREE):t===K.SPIKES_FOUR?this.currentState=this.stateMachines.get(B.SPIKES_FOUR):this.currentState=this.currentState;break;default:this.currentState=this.stateMachines.get(B.SPIKES_ONE)}},i}(b))||pe;u._RF.pop(),u._RF.push({},"3f0fdrnHy5NaYg+CgvL6nX7","SpikesManager",void 0);var Ee=(0,p.ccclass)("SpikesManager")(ve=function(r){function h(){for(var t,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t=r.call.apply(r,[this].concat(n))||this,s(a(t),"id",Z(12)),s(a(t),"_totalCount",void 0),s(a(t),"_count",0),s(a(t),"x",void 0),s(a(t),"y",void 0),s(a(t),"type",void 0),s(a(t),"fsm",void 0),t}t(h,r);var c=h.prototype;return c.init=function(){var t=e((function*(t){this.node.addComponent(d).sizeMode=d.SizeMode.CUSTOM,this.getComponent(v).setContentSize(4*Y,4*W),this.fsm=this.node.addComponent(de),yield this.fsm.init(),this.x=t.x,this.y=t.y;var e=t.type;this.totalCount=K[e],this.count=t.count,n.Instance.on(g.PLAYER_MOVE_END,this.onLoop,this)}));return function(e){return t.apply(this,arguments)}}(),c.onDestroy=function(){n.Instance.off(g.PLAYER_MOVE_END,this.onLoop)},c.update=function(){this.node.setPosition(this.x*Y-1.5*Y,-this.y*W+1.5*W)},c.onLoop=function(){this.count==this.totalCount?this.count=1:this.count++,this.onAttack()},c.backZero=function(){this.count=0},c.onAttack=function(){var t=i.Instance.player,e=t.x,s=t.y;e===this.x&&s===this.y&&this.count===this.totalCount&&n.Instance.emit(g.ATTACK_PLAYER,y.DEATH)},o(h,[{key:"count",get:function(){return this._count},set:function(t){this._count=t,this.fsm.setParams(L.SPIKES_CUR_COUNT,t)}},{key:"totalCount",get:function(){return this._totalCount},set:function(t){this._totalCount=t,this.fsm.setParams(L.SPIKES_TOTAL_COUNT,t)}}]),h}(T))||ve;u._RF.pop(),u._RF.push({},"bd1a36HO0hEZYiCmbb4hdsS","DeathSubStateMachine",void 0);var Me="texture/door/death",Ie=function(e){function n(t){var n;return(n=e.call(this,t)||this).stateMachines.set(O.TOP,new H(t,""+Me)),n.stateMachines.set(O.BOTTOM,new H(t,""+Me)),n.stateMachines.set(O.LEFT,new H(t,""+Me)),n.stateMachines.set(O.RIGHT,new H(t,""+Me)),n}return t(n,e),n}(D);u._RF.pop(),u._RF.push({},"f2860nev4VKObYhkfI39Vpv","IdleSubStateMachine",void 0);var me,Re="texture/smoke/idle",Oe=function(e){function n(t){var n;return(n=e.call(this,t)||this).stateMachines.set(O.TOP,new H(t,Re+"/top",l.WrapMode.Normal,G/1.5)),n.stateMachines.set(O.BOTTOM,new H(t,Re+"/bottom",l.WrapMode.Normal,G/1.5)),n.stateMachines.set(O.LEFT,new H(t,Re+"/left",l.WrapMode.Normal,G/1.5)),n.stateMachines.set(O.RIGHT,new H(t,Re+"/right",l.WrapMode.Normal,G/1.5)),n}return t(n,e),n}(D);u._RF.pop(),u._RF.push({},"1e09dbWc8NLMInVzRcnLZyh","SmokeStateMachine",void 0);var Le,Se=(0,p.ccclass)("SmokeStateMachine")(me=function(n){function i(){return n.apply(this,arguments)||this}t(i,n);var s=i.prototype;return s.init=function(){var t=e((function*(){this.animationComponent=this.node.addComponent(f),this.initParams(),this.initStateMachines(),this.initAnimationEvent(),yield Promise.all(this.waitingList)}));return function(){return t.apply(this,arguments)}}(),s.initAnimationEvent=function(){var t=this;this.animationComponent.on(f.EventType.FINISHED,(function(){var e=t.animationComponent.defaultClip.name;["idle"].some((function(t){return e.includes(t)}))&&(t.node.getComponent(x).state=y.DEATH)}))},s.initParams=function(){this.params.set(L.IDLE,P()),this.params.set(L.DEATH,P()),this.params.set(L.DIRECTION,w())},s.initStateMachines=function(){this.stateMachines.set(L.IDLE,new Oe(this)),this.stateMachines.set(L.DEATH,new Ie(this))},s.run=function(){switch(this.currentState){case this.stateMachines.get(L.DEATH):case this.stateMachines.get(L.IDLE):this.params.get(L.DEATH).value?this.currentState=this.stateMachines.get(L.DEATH):this.params.get(L.IDLE).value?this.currentState=this.stateMachines.get(L.IDLE):this.currentState=this.currentState;break;default:this.currentState=this.stateMachines.get(L.IDLE)}},i}(b))||me;u._RF.pop(),u._RF.push({},"5ee06kSeElMQa5ZUIpMP8kD","SmokeManager",void 0);var ye,ge=(0,p.ccclass)("SmokeManager")(Le=function(n){function i(){return n.apply(this,arguments)||this}return t(i,n),i.prototype.init=function(){var t=e((function*(t){this.fsm=this.addComponent(Se),yield this.fsm.init(),n.prototype.init.call(this,t)}));return function(e){return t.apply(this,arguments)}}(),i}(x))||Le;u._RF.pop(),u._RF.push({},"ae2aewOHhpByp3eG8llF0Q9","ShakeManager",void 0);var Ce,Ae,Fe=(0,p.ccclass)("ShakeManager")(ye=function(e){function i(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i))||this,s(a(t),"isShaking",void 0),s(a(t),"shakeType",void 0),s(a(t),"oldTime",void 0),s(a(t),"oldPos",{x:0,y:0}),t}t(i,e);var r=i.prototype;return r.onLoad=function(){n.Instance.on(g.SCREEN_SHAKE,this.onShake,this)},r.onDestroy=function(){n.Instance.off(g.SCREEN_SHAKE,this.onShake)},r.stop=function(){this.isShaking=!1},r.onShake=function(t){this.isShaking||(this.isShaking=!0,this.shakeType=t,this.oldTime=E.totalTime,this.oldPos.x=this.node.position.x,this.oldPos.y=this.node.position.y)},r.update=function(){this.onShakeUpdate()},r.onShakeUpdate=function(){if(this.isShaking){var t=(E.totalTime-this.oldTime)/1e3,e=1.6*Math.sin(12*Math.PI*t);this.shakeType===C.TOP?this.node.setPosition(this.oldPos.x,this.oldPos.y-e):this.shakeType===C.BOTTOM?this.node.setPosition(this.oldPos.x,this.oldPos.y+e):this.shakeType===C.LEFT?this.node.setPosition(this.oldPos.x-e,this.oldPos.y):this.shakeType===C.RIGHT&&this.node.setPosition(this.oldPos.x+e,this.oldPos.y),t>.2&&(this.isShaking=!1,this.node.setPosition(this.oldPos.x,this.oldPos.y))}},i}(T))||ye;u._RF.pop(),u._RF.push({},"17d5aEnquFEpbWki0tR0Fap","BattleManager",void 0);var Ke=p.ccclass;(null===(Ce=window)||void 0===Ce?void 0:Ce.vConsole)&&(window.vConsole.$dom.style.display="none");var Be;Ke("BattleManager")(Ae=function(r){function o(){for(var t,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t=r.call.apply(r,[this].concat(n))||this,s(a(t),"level",void 0),s(a(t),"stage",null),s(a(t),"smokeLayer",null),s(a(t),"hasInited",!1),t}t(o,r);var h=o.prototype;return h.onLoad=function(){M.preloadScene(_.Start),i.Instance.levelIndex=1,n.Instance.on(g.RESTART_LEVEL,this.initLevel,this),n.Instance.on(g.NEXT_LEVEL,this.nextLevel,this),n.Instance.on(g.PLAYER_MOVE_END,this.checkArrived,this),n.Instance.on(g.SHOW_SMOKE,this.generateSmoke,this),n.Instance.on(g.RECORD_STEP,this.record,this),n.Instance.on(g.REVOKE_STEP,this.revoke,this),n.Instance.on(g.QUIT_BATTLE,this.quitBattle,this)},h.onDestroy=function(){n.Instance.off(g.RESTART_LEVEL,this.initLevel),n.Instance.off(g.NEXT_LEVEL,this.nextLevel),n.Instance.off(g.PLAYER_MOVE_END,this.checkArrived),n.Instance.off(g.SHOW_SMOKE,this.generateSmoke),n.Instance.off(g.RECORD_STEP,this.record),n.Instance.off(g.REVOKE_STEP,this.revoke),n.Instance.off(g.QUIT_BATTLE,this.quitBattle),n.Instance.clear()},h.start=function(){this.generateStage(),this.initLevel()},h.initLevel=function(){var t=e((function*(){var t,e=j["level"+i.Instance.levelIndex];e?(this.hasInited?yield z.Instance.fadeIn():yield z.Instance.mask(),this.clearLevel(),this.level=e,i.Instance.mapInfo=this.level.mapInfo,i.Instance.mapRowCount=this.level.mapInfo.length||0,i.Instance.mapColumnCount=(null===(t=this.level.mapInfo[0])||void 0===t?void 0:t.length)||0,yield Promise.all([this.generateTileMap(),this.generateBursts(),this.generateSpikes(),this.generateSmokeLayer(),this.generateDoor(),this.generateEnemies()]),yield this.generatePlayer(),yield z.Instance.fadeOut(),this.hasInited=!0):this.quitBattle()}));return function(){return t.apply(this,arguments)}}(),h.quitBattle=function(){this.node.destroy(),M.loadScene(_.Start)},h.clearLevel=function(){this.stage.destroyAllChildren(),i.Instance.reset()},h.generateStage=function(){this.stage=X(),this.stage.setParent(this.node),this.stage.setSiblingIndex(2),this.stage.addComponent(Fe)},h.generateTileMap=function(){var t=e((function*(){var t=X();t.setParent(this.stage);var e=t.addComponent(Vt);yield e.init(),this.adaptMapPos()}));return function(){return t.apply(this,arguments)}}(),h.adaptMapPos=function(){var t=i.Instance,e=t.mapRowCount,n=t.mapColumnCount,s=Y*e/2,a=W*n/2+80;this.stage.getComponent(Fe).stop(),this.stage.setPosition(-s,a)},h.generatePlayer=function(){var t=e((function*(){var t=X();t.setParent(this.stage);var e=t.addComponent(Wt);yield e.init(this.level.player),i.Instance.player=e,n.Instance.emit(g.PLAYER_BORN,!0)}));return function(){return t.apply(this,arguments)}}(),h.generateEnemies=function(){var t=e((function*(){i.Instance.enemies=[];for(var t=[],e=0;e<this.level.enemies.length;e++){var n=this.level.enemies[e],s=X();s.setParent(this.stage);var a=n.type===B.SKELETON_WOODEN?Tt:it,r=s.addComponent(a);t.push(r.init(n)),i.Instance.enemies.push(r)}yield Promise.all(t)}));return function(){return t.apply(this,arguments)}}(),h.generateBursts=function(){var t=e((function*(){for(var t=[],e=0;e<this.level.bursts.length;e++){var n=this.level.bursts[e],s=X();s.setParent(this.stage);var a=s.addComponent(ae);t.push(a.init(n)),i.Instance.bursts.push(a)}yield Promise.all(t)}));return function(){return t.apply(this,arguments)}}(),h.generateSpikes=function(){var t=e((function*(){for(var t=[],e=0;e<this.level.spikes.length;e++){var n=this.level.spikes[e],s=X();s.setParent(this.stage);var a=s.addComponent(Ee);t.push(a.init(n)),i.Instance.spikes.push(a)}yield Promise.all(t)}));return function(){return t.apply(this,arguments)}}(),h.generateDoor=function(){var t=e((function*(){var t=X();t.setParent(this.stage);var e=t.addComponent(te);yield e.init(this.level.door),i.Instance.door=e}));return function(){return t.apply(this,arguments)}}(),h.generateSmoke=function(){var t=e((function*(t,e,n){var s=i.Instance.smokes.find((function(t){return t.state===y.DEATH}));if(s)s.x=t,s.y=e,s.node.setPosition(s.x*Y-1.5*Y,-s.y*W+1.5*W),s.direction=n,s.state=y.IDLE;else{var a=X();a.setParent(this.smokeLayer);var r=a.addComponent(ge);yield r.init({x:t,y:e,direction:n,state:y.IDLE,type:B.SMOKE}),i.Instance.smokes.push(r)}}));return function(e,n,i){return t.apply(this,arguments)}}(),h.generateSmokeLayer=function(){var t=e((function*(){this.smokeLayer=X(),this.smokeLayer.setParent(this.stage)}));return function(){return t.apply(this,arguments)}}(),h.nextLevel=function(){i.Instance.levelIndex++,console.log(i.Instance.levelIndex),this.initLevel()},h.checkArrived=function(){var t=i.Instance.door,e=t.x,s=t.y,a=t.state,r=i.Instance.player,o=r.x,h=r.y;e===o&&s===h&&a===y.DEATH&&n.Instance.emit(g.NEXT_LEVEL)},h.record=function(){var t={player:{x:i.Instance.player.targetX,y:i.Instance.player.targetY,state:i.Instance.player.state===y.IDLE||i.Instance.player.state===y.DEATH||i.Instance.player.state===y.AIRDEATH?i.Instance.player.state:y.IDLE,direction:i.Instance.player.direction,type:i.Instance.player.type},door:{x:i.Instance.door.x,y:i.Instance.door.y,state:i.Instance.door.state,direction:i.Instance.door.direction,type:i.Instance.door.type},enemies:i.Instance.enemies.map((function(t){return{x:t.x,y:t.y,state:t.state,direction:t.direction,type:t.type}})),spikes:i.Instance.spikes.map((function(t){return{x:t.x,y:t.y,count:t.count,type:t.type}})),bursts:i.Instance.bursts.map((function(t){return{x:t.x,y:t.y,state:t.state,direction:t.direction,type:t.type}}))};i.Instance.records.push(t)},h.revoke=function(){var t=i.Instance.records.pop();if(t){i.Instance.player.x=i.Instance.player.targetX=t.player.x,i.Instance.player.y=i.Instance.player.targetY=t.player.y,i.Instance.player.state=t.player.state,i.Instance.player.direction=t.player.direction;for(var e=0;e<t.enemies.length;e++){var n=t.enemies[e];i.Instance.enemies[e].x=n.x,i.Instance.enemies[e].y=n.y,i.Instance.enemies[e].state=n.state,i.Instance.enemies[e].direction=n.direction}for(var s=0;s<t.spikes.length;s++){var a=t.spikes[s];i.Instance.spikes[s].x=a.x,i.Instance.spikes[s].y=a.y,i.Instance.spikes[s].count=a.count}for(var r=0;r<t.bursts.length;r++){var o=t.bursts[r];i.Instance.bursts[r].x=o.x,i.Instance.bursts[r].y=o.y,i.Instance.bursts[r].state=o.state}i.Instance.door.x=t.door.x,i.Instance.door.y=t.door.y,i.Instance.door.state=t.door.state,i.Instance.door.direction=t.door.direction}},o}(T));u._RF.pop(),u._RF.push({},"9ae07vNWQVKI78+H+eSZJIP","MenuManager",void 0);var _e,He,De,Pe,we;(0,p.ccclass)("MenuManager")(Be=function(e){function i(){return e.apply(this,arguments)||this}t(i,e);var s=i.prototype;return s.handleRevoke=function(){n.Instance.emit(g.REVOKE_STEP)},s.handleRestart=function(){n.Instance.emit(g.RESTART_LEVEL)},s.handleOut=function(){n.Instance.emit(g.QUIT_BATTLE)},i}(T));u._RF.pop(),u._RF.push({},"a4cfb5Lk4FE0LKOiaKhBjZV","LoadingManager",void 0);var be,ke=p.ccclass,Ne=p.property;_e=ke("LoadingManager"),He=Ne(I),_e((we=h((Pe=function(n){function i(){for(var t,e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return t=n.call.apply(n,[this].concat(i))||this,c(a(t),"bar",we,a(t)),t}t(i,n);var s=i.prototype;return s.onLoad=function(){this.preLoad()},s.preLoad=function(){var t=this;M.preloadScene(_.Start),m.preloadDir("texture",(function(e,n){t.bar.progress=e/n}),function(){var n=e((function*(e){if(e)return yield new Promise((function(t){setTimeout(t,2e3)})),void t.preLoad();M.loadScene(_.Start)}));return function(t){return n.apply(this,arguments)}}())},i}(T)).prototype,"bar",[He],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),De=Pe));u._RF.pop(),u._RF.push({},"e1f034VD2tNOLeMgY7cspIy","StartManager",void 0);var xe;(0,p.ccclass)("StartManager")(be=function(n){function i(){return n.apply(this,arguments)||this}t(i,n);var s=i.prototype;return s.onLoad=function(){M.preloadScene(_.Battle),z.Instance.fadeOut(1e3),this.node.once(R.EventType.TOUCH_START,this.handleStart,this)},s.handleStart=function(){var t=e((function*(){yield z.Instance.fadeIn(300),M.loadScene(_.Battle)}));return function(){return t.apply(this,arguments)}}(),i}(T));u._RF.pop(),u._RF.push({},"ede2a0/UrtGk4YoVc9P7bIP","ControllerManager",void 0);var Ge=p.ccclass;p.property,Ge("ControllerManager")(xe=function(e){function i(){return e.apply(this,arguments)||this}return t(i,e),i.prototype.handleCtrl=function(t,e){n.Instance.emit(g.PLAYER_CTRL,e)},i}(T));u._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///main.js'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});