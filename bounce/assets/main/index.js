System.register("chunks:///_virtual/audio-manager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){"use strict";var t,o,e,n,r,a,u,l,c;return{setters:[function(i){t=i.applyDecoratedDescriptor,o=i.inheritsLoose,e=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){r=i.cclegacy,a=i._decorator,u=i.AudioClip,l=i.AudioSource,c=i.Component}],execute:function(){var p,s,d,f,h,g,y;r._RF.push({},"52ff6Qg0MlJaaUpLNS1HPTJ","audio-manager",void 0);var m=a.ccclass,b=a.property;i("AudioManager",(p=m("AudioManager"),s=b(u),d=b(u),p((g=t((h=function(i){function t(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r))||this,e(t,"bg",g,n(t)),e(t,"click",y,n(t)),t.audioComp=null,t}o(t,i);var r=t.prototype;return r.start=function(){this.audioComp=this.getComponent(l)},r.playSound=function(i){void 0===i&&(i=!0),i?(this.audioComp.clip=this.bg,this.audioComp.play()):this.audioComp.stop()},r.playClip=function(){this.audioComp.playOneShot(this.click)},t}(c)).prototype,"bg",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(h.prototype,"click",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=h))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/ball.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constants.ts","./utils.ts","./pool-manager.ts"],(function(t){"use strict";var e,i,r,o,s,a,n,u,h,l,c,d,P,m,p,_,A,S,T,B,E;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,a=t._decorator,n=t.Vec3,u=t.Texture2D,h=t.Prefab,l=t.Node,c=t.ParticleUtils,d=t.find,P=t.Camera,m=t.Label,p=t.Animation,_=t.MeshRenderer,A=t.ParticleSystem,S=t.Component},function(t){T=t.Constants},function(t){B=t.utils},function(t){E=t.PoolManager}],execute:function(){var f,g,L,R,M,N,v,b,O,D,y,I,J,C,U,F,x;s._RF.push({},"900c8pQ81tCcrbRdvi9SxTB","ball",void 0);var G=a.ccclass,w=a.property,Y=new n;t("Ball",(f=G("Ball"),g=w({type:u}),L=w({type:u}),R=w({type:u}),M=w({type:u}),N=w(h),v=w({type:h}),b=w({type:h}),f((y=e((D=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,r(e,"bgtexture1",y,o(e)),r(e,"bgtexture2",I,o(e)),r(e,"texture1",J,o(e)),r(e,"texture2",C,o(e)),r(e,"diamondParticlePrefab",U,o(e)),r(e,"scoreAniPrefab",F,o(e)),r(e,"trail02Prefab",x,o(e)),e.currBoard=null,e.boardCount=0,e.jumpState=T.BALL_JUMP_STATE.JUMPUP,e.currBoardIdx=0,e.diffLevel=1,e.currJumpFrame=0,e.hasSprint=!1,e.isTouch=!1,e.touchPosX=0,e.movePosX=0,e.isJumpSpring=!1,e.boardGroupCount=0,e.trailNode=null,e.timeScale=0,e.levelBoardNumber=6,e._wPos=new n,e}i(e,t);var s=e.prototype;return s.start=function(){T.game.node.on(l.EventType.TOUCH_START,this.onTouchStart,this),T.game.node.on(l.EventType.TOUCH_END,this.onTouchEnd,this),T.game.node.on(l.EventType.TOUCH_MOVE,this.onTouchMove,this),T.game.node.on(T.GAME_EVENT.RESTART,this.gameStart,this),T.game.node.on(T.GAME_EVENT.CONTINUELEVEL,this.gameStart,this),this.updateBall(),this.reset()},s.continueGame=function(){this.levelBoardNumber=6},s.onDestroy=function(){T.game.node.off(l.EventType.TOUCH_START,this.onTouchStart,this),T.game.node.off(l.EventType.TOUCH_END,this.onTouchEnd,this),T.game.node.off(l.EventType.TOUCH_MOVE,this.onTouchMove,this),T.game.node.off(T.GAME_EVENT.RESTART,this.gameStart,this)},s.update=function(t){if(this.timeScale=Math.floor(t/T.normalDt*100)/100,T.game.state===T.GAME_STATE.PLAYING){var e=T.game.boardManager,i=e.getBoardList();if(this.jumpState===T.BALL_JUMP_STATE.SPRINT){this.currJumpFrame>T.BALL_JUMP_FRAMES_SPRINT&&(this.jumpState=T.BALL_JUMP_STATE.JUMPUP,this.isJumpSpring=!1,this.currJumpFrame=0,this.hasSprint=!1,e.clearDiamond()),this.currJumpFrame+=this.timeScale;for(var r=e.getDiamondSprintList(),o=0;o<T.DIAMOND_NUM;o++)Math.abs(this.node.position.y-r[o].position.y)<=T.DIAMOND_SPRINT_SCORE_AREA&&Math.abs(this.node.position.x-r[o].position.x)<=T.DIAMOND_SPRINT_SCORE_AREA&&(T.game.addScore(T.DIAMOND_SCORE),this.showScore(T.DIAMOND_SCORE),T.game.ball.playDiamondParticle(this.node.position),r[o].active=!1);this.setPosY(),this.setPosX(),this.touchPosX=this.movePosX;var s=this.node.position.y+T.CAMERA_OFFSET_Y_SPRINT;T.game.cameraCtrl.setOriginPosY(s)}else{for(var a=this.currBoardIdx+1;a>=0;a--){var n=i[a];if(n){var u=this.node.position,h=i[a].node.position;if(Math.abs(u.x-h.x)<=i[a].getRadius()&&Math.abs(u.y-(h.y+T.BOARD_HEIGTH))<=T.DIAMOND_SCORE_AREA&&i[a].checkDiamond(u.x),this.jumpState===T.BALL_JUMP_STATE.FALLDOWN){if(this.currJumpFrame>T.PLAYER_MAX_DOWN_FRAMES||this.currBoard.node.position.y-u.y-(T.BOARD_GAP+T.BOARD_HEIGTH)>.001)return c.stop(this.trailNode),void T.game.gameDie();if(this.isOnBoard(n)){this.currBoard=n,this.currBoardIdx=a,this.activeCurrBoard(i);break}}}}this.currJumpFrame+=this.timeScale,this.jumpState===T.BALL_JUMP_STATE.JUMPUP&&(this.isJumpSpring&&this.currJumpFrame>=T.BALL_JUMP_FRAMES_SPRING||!this.isJumpSpring&&this.currJumpFrame>=T.BALL_JUMP_FRAMES)&&(this.jumpState=T.BALL_JUMP_STATE.FALLDOWN,this.currJumpFrame=0),this.setPosY(),this.setPosX(),this.currBoard.type!==T.BOARD_TYPE.SPRINT&&T.game.cameraCtrl.setOriginPosX(this.node.position.x),this.touchPosX=this.movePosX}this.setTrailPos()}},s.onTouchStart=function(t,e){this.isTouch=!0,this.touchPosX=t.getLocation().x,this.movePosX=this.touchPosX},s.onTouchMove=function(t,e){this.movePosX=t.getLocation().x},s.onTouchEnd=function(t,e){this.isTouch=!1},s.gameStart=function(){this.playTrail()},s.reset=function(){this.boardCount=0,this.diffLevel=1,Y.set(T.BOARD_INIT_POS),Y.y+=T.BALL_RADIUS+T.BOARD_HEIGTH/2-.001,this.node.setPosition(Y),this.node.eulerAngles=new n,this.currJumpFrame=0,this.jumpState=T.BALL_JUMP_STATE.FALLDOWN,this.hasSprint=!1,this.currBoardIdx=0,this.show(),this.setTrailPos()},s.gameContinue=function(){this.boardCount=0,Y.set(T.BOARD_INIT_POS),Y.y+=T.BALL_RADIUS+T.BOARD_HEIGTH/2-.001,this.node.setPosition(Y),this.node.eulerAngles=new n,this.currJumpFrame=0,this.jumpState=T.BALL_JUMP_STATE.FALLDOWN,this.hasSprint=!1,this.currBoardIdx=0,this.levelBoardNumber=6,this.show(),this.setTrailPos()},s.restLevel=function(){this.levelBoardNumber=6},s.updateBall=function(){this.trailNode=E.instance.getNode(this.trail02Prefab,this.node.parent)},s.show=function(){this.node.active=!0},s.hide=function(){this.node.active=!1},s.activeCurrBoard=function(t){var e=this.node.position,i=this.currBoard.node.position,r=this.currBoard.type,o=i.y+T.BALL_RADIUS+this.currBoard.getHeight()/2-.01;if(this.node.setPosition(e.x,o,e.z),this.currJumpFrame=0,r===T.BOARD_TYPE.SPRINT?(this.jumpState=T.BALL_JUMP_STATE.SPRINT,T.game.cameraCtrl.setOriginPosX(i.x)):this.jumpState=T.BALL_JUMP_STATE.JUMPUP,!this.currBoard.isActive){this.currBoard.isActive=!0;var s=T.SCORE_BOARD_NOT_CENTER;(r!==T.BOARD_TYPE.NORMAL&&r!==T.BOARD_TYPE.DROP||Math.abs(e.x-i.x)<=T.BOARD_RADIUS_CENTER)&&(s=T.SCORE_BOARD_CENTER),T.game.addScore(s),this.showScore(s),this.boardCount++,5===this.boardCount&&T.game.node.emit(T.GAME_EVENT.HIDETIPS),this.diffLevel+=s/2;for(var a=this.currBoardIdx-T.BOARD_NEW_INDEX;a>0;a--)this.newBoard()}this.isJumpSpring=r===T.BOARD_TYPE.SPRING,this.currBoard.setBump(),this.currBoard.setWave(),r!=T.BOARD_TYPE.SPRING&&r!=T.BOARD_TYPE.SPRINT||this.currBoard.setSpring();var n=T.game.boardManager.getBoardList();if(r===T.BOARD_TYPE.DROP)for(var u=0;u<this.currBoardIdx;u++)n[u].setDrop();var h=i.y+T.CAMERA_OFFSET_Y;T.game.cameraCtrl.setOriginPosY(h),T.game.cameraCtrl.preType=r},s.newBoard=function(){var t=T.BOARD_TYPE.NORMAL;if(this.boardGroupCount<=0){var e=B.getDiffCoeff(this.diffLevel,1,10),i=Math.random()*e;i<4.2?(t=T.BOARD_TYPE.NORMAL,this.boardGroupCount=2):i<=5.5?(t=T.BOARD_TYPE.GIANT,this.boardGroupCount=3):i<=6.2?(t=T.BOARD_TYPE.SPRING,Math.random()>.5&&(this.boardGroupCount=2)):i<=7?(t=T.BOARD_TYPE.DROP,this.boardGroupCount=3):i<=7.5&&!1===this.hasSprint?(t=T.BOARD_TYPE.SPRINT,this.hasSprint=!0):t=T.BOARD_TYPE.NORMAL}this.boardGroupCount--,this.levelBoardNumber+=1,T.game.boardManager.newBoard(t,this.diffLevel)},s.showScore=function(t){console.log("122",t);var e=E.instance.getNode(this.scoreAniPrefab,d("Canvas/resultUI")),i=new n,r=T.game.cameraCtrl.node.getComponent(P);this._wPos.set(this.node.worldPosition),r.convertToUINode(this._wPos,d("Canvas/resultUI"),i),i.x+=50,e.setPosition(i),e.getComponentInChildren(m).string="+"+t;var o=e.getComponent(p);o.once(p.EventType.FINISHED,(function(){E.instance.putNode(e)})),o.play(),this.switchBallbg()},s.switchBallbg=function(){if(T.game.score%10==0){var t,e,i,r,o=null==(t=this.node.getChildByName("RootNode"))||null==(e=t.getChildByName("Sphere001"))?void 0:e.getComponent(_),s=null==o||null==(i=o.material)?void 0:i.getProperty("albedoMap");null==o||null==(r=o.material)||r.setProperty("albedoMap",s===this.texture1?this.texture2:this.texture1)}if(T.game.score%20==0){var a,n=null==(a=d("planeBg01/RootNode/Plane001"))?void 0:a.getComponent(_);if(console.log(n,"bg"),n){var u,h,l=null==n||null==(u=n.material)?void 0:u.getProperty("albedoMap");console.log(l,"currentMaterial",this.bgtexture1,"this.bgtexture1",this.bgtexture2),null==n||null==(h=n.material)||h.setProperty("albedoMap",l===this.bgtexture1?this.bgtexture2:this.bgtexture1)}}},s.setPosX=function(){if(this.isTouch&&this.touchPosX!==this.movePosX)if(Y.set(this.node.position),this.jumpState===T.BALL_JUMP_STATE.SPRINT){var t=(this.movePosX-this.touchPosX)*T.COEFF_POS_BALL;this.node.setPosition(Y.x+t,Y.y,Y.z),Y.set(this.node.position),t=Y.x;var e=1.3*T.SCENE_MAX_OFFSET_X,i=this.currBoard.node.position;t>i.x+e?this.node.setPosition(i.x+e,Y.y,Y.z):t<this.currBoard.node.position.x-e&&this.node.setPosition(i.x-e,Y.y,Y.z)}else{var r=(this.movePosX-this.touchPosX)*T.COEFF_POS_BALL;this.node.setPosition(Y.x+r,Y.y,Y.z)}},s.setPosY=function(){if(Y.set(this.node.position),this.jumpState===T.BALL_JUMP_STATE.JUMPUP)this.isJumpSpring?Y.y+=T.BALL_JUMP_STEP_SPRING[Math.floor(this.currJumpFrame/3)]*this.timeScale:Y.y+=T.BALL_JUMP_STEP[Math.floor(this.currJumpFrame/2)]*this.timeScale,this.node.setPosition(Y);else if(this.jumpState===T.BALL_JUMP_STATE.FALLDOWN){if(this.currBoard.type===T.BOARD_TYPE.SPRING)if(this.currJumpFrame<T.BALL_JUMP_FRAMES_SPRING){var t=T.BALL_JUMP_FRAMES_SPRING-this.currJumpFrame-1;Y.y-=T.BALL_JUMP_STEP_SPRING[Math.floor((t>=0?t:0)/3)]*this.timeScale}else Y.y-=T.BALL_JUMP_STEP_SPRING[0]*this.timeScale;else if(this.currJumpFrame<T.BALL_JUMP_FRAMES){var e=T.BALL_JUMP_FRAMES-this.currJumpFrame-1;Y.y-=T.BALL_JUMP_STEP[Math.floor((e>=0?e:0)/2)]*this.timeScale}else Y.y-=T.BALL_JUMP_STEP[0]*this.timeScale;this.node.setPosition(Y)}else this.jumpState===T.BALL_JUMP_STATE.SPRINT&&(Y.y+=T.BALL_JUMP_STEP_SPRINT*this.timeScale,this.node.setPosition(Y),this.currJumpFrame>=T.DIAMOND_START_FRAME+20&&this.currJumpFrame<=T.BALL_JUMP_FRAMES_SPRINT-50&&Math.floor(this.currJumpFrame)%Math.floor(T.DIAMOND_SPRINT_STEP_Y/T.BALL_JUMP_STEP_SPRINT)==0&&T.game.boardManager.newDiamond())},s.isOnBoard=function(t){var e=this.node.position,i=t.node.position,r=Math.abs(e.x-i.x),o=e.y-i.y;if(r<=t.getRadius()){if(o>=0&&o<=T.BALL_RADIUS+t.getHeight()/2)return!0;if(this.isJumpSpring&&this.currJumpFrame>=T.BALL_JUMP_FRAMES_SPRING){if(Math.abs(o)<T.BALL_JUMP_STEP_SPRING[0])return!0}else if(!this.isJumpSpring&&this.currJumpFrame>=T.BALL_JUMP_FRAMES&&Math.abs(o)<T.BALL_JUMP_STEP[0])return!0}return!1},s.revive=function(){this.currBoardIdx--,this.currBoard.type===T.BOARD_TYPE.SPRINT&&(this.currBoardIdx++,this.currBoard=T.game.boardManager.getBoardList()[this.currBoardIdx]),this.currBoard.revive();var t=this.currBoard.node.position.clone();t.y+=T.BALL_RADIUS+this.currBoard.getHeight()/2-.001,this.node.setPosition(t),this.node.eulerAngles=new n(0,0,0),this.currJumpFrame=0,this.show();var e=this.currBoard.node.position.y+T.CAMERA_OFFSET_Y;T.game.cameraCtrl.setOriginPosX(t.x),T.game.cameraCtrl.setOriginPosY(e),this.playTrail(),this.setTrailPos()},s.playDiamondParticle=function(t){var e=this,i=E.instance.getNode(this.diamondParticlePrefab,this.node.parent);i.setPosition(t);var r=i.getComponent(A);r.play();this.schedule((function t(){r.isPlaying||(E.instance.putNode(i),e.unschedule(t))}),.1)},s.playTrail=function(){c.play(this.trailNode)},s.setTrailPos=function(){var t=this.node.position;this.trailNode.setPosition(t.x,t.y-.1,t.z)},e}(S)).prototype,"bgtexture1",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(D.prototype,"bgtexture2",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(D.prototype,"texture1",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(D.prototype,"texture2",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(D.prototype,"diamondParticlePrefab",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(D.prototype,"scoreAniPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(D.prototype,"trail02Prefab",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=D))||O));s._RF.pop()}}}));

System.register("chunks:///_virtual/board-manager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constants.ts","./utils.ts","./randomColor.mjs_cjs=&original=.js","./randomColor.js"],(function(t){"use strict";var i,n,o,r,e,a,s,d,h,l,u,_,c,m,f;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){e=t.cclegacy,a=t._decorator,s=t.Vec3,d=t.Prefab,h=t.instantiate,l=t.MeshRenderer,u=t.Color,_=t.Component},function(t){c=t.Constants},function(t){m=t.utils},null,function(t){f=t.default}],execute:function(){var p,D,N,S,P,b,A;e._RF.push({},"2a0a0QivvtEZodpOZ79qMFb","board-manager",void 0);var M=a.ccclass,g=a.property,I=new s,v=new s;t("BoardManager",(p=M("BoardManager"),D=g(d),N=g(d),p((b=i((P=function(t){function i(){for(var i,n=arguments.length,e=new Array(n),a=0;a<n;a++)e[a]=arguments[a];return i=t.call.apply(t,[this].concat(e))||this,o(i,"boardPrefab",b,r(i)),o(i,"diamondPrefab",A,r(i)),i.diamondSprintList=[],i.diamondCenterX=0,i._boardList=[],i._boardInsIdx=0,i}n(i,t);var e=i.prototype;return e.start=function(){this.initBoard(),this.initDiamond()},e.reset=function(){this._boardInsIdx=0,c.game.initFirstBoard=!1;for(var t,i=c.BOARD_INIT_POS.clone(),n=c.BOARD_TYPE.NORMAL,o=0;o<c.BOARD_NUM;o++)(t=this._boardList[o]).reset(n,i,1),i=this.getNextPos(t,1);if((t=this._boardList[0]).isActive=!0,c.game.ball.currBoard=t,this.diamondSprintList[0])for(var r=0;r<c.DIAMOND_NUM;r++)this.diamondSprintList[r].active=!1},e.initBoard=function(){for(var t=0;t<c.BOARD_NUM;t++){var i=h(this.boardPrefab);i.name=this._boardInsIdx.toString(),this._boardInsIdx++,this.node.addChild(i);var n=i.getComponent("Board");this.changeColor(n),this._boardList.push(n)}this.reset()},e.changeColor=function(t){var i,n,o,r,e;null==t||null==(i=t.node)||null==(n=i.getChildByName("RootNode"))||null==(o=n.getChildByName("Cylinder001"))||null==(r=o.getComponent(l))||null==(e=r.material)||e.setProperty("mainColor",new u(f({luminosity:"light",hue:"random"})))},e.newBoard=function(t,i){var n=this._boardList[c.BOARD_NUM-1],o=this.getNextPos(n,i,I),r=this._boardList.shift();this.changeColor(r),t===c.BOARD_TYPE.SPRINT?(this.diamondCenterX=o.x,this.setDiamond(o),r.reset(t,o,0)):r.reset(t,o,i),r.name=this._boardInsIdx.toString(),this._boardInsIdx++,this._boardList.push(r)},e.getNextPos=function(t,i,n){var o=n?n.set(t.node.position):t.node.position.clone(),r=m.getDiffCoeff(i,1,2);return o.x=(Math.random()-.5)*c.SCENE_MAX_OFFSET_X*r,t.type===c.BOARD_TYPE.SPRINT&&(o.y+=c.BOARD_GAP_SPRINT,o.x=t.node.position.x),t.type===c.BOARD_TYPE.SPRING?o.y+=c.BOARD_GAP_SPRING:o.y+=c.BOARD_GAP,o},e.initDiamond=function(){for(var t=0;t<c.DIAMOND_NUM;t++)this.diamondSprintList[t]=h(this.diamondPrefab),this.node.addChild(this.diamondSprintList[t]),this.diamondSprintList[t].active=!1},e.setDiamond=function(t){var i=t.clone();i.y+=c.BALL_JUMP_STEP_SPRINT*c.DIAMOND_START_FRAME;for(var n=0;n<c.DIAMOND_NUM;n++)this.setNextDiamondPos(i),this.diamondSprintList[n].setPosition(i),this.diamondSprintList[n].active=!0},e.newDiamond=function(){v.set(this.diamondSprintList[c.DIAMOND_NUM-1].position),this.setNextDiamondPos(v);var t=this.diamondSprintList.shift();t.setPosition(v),t.active=!0,this.diamondSprintList.push(t)},e.clearDiamond=function(){for(var t=0;t<c.DIAMOND_NUM;t++)this.diamondSprintList[t].active=!1},e.setNextDiamondPos=function(t){t.y+=c.DIAMOND_SPRINT_STEP_Y,t.x+=1.5*(Math.random()-.5),t.x>this.diamondCenterX+c.SCENE_MAX_OFFSET_X?t.x=this.diamondCenterX+c.SCENE_MAX_OFFSET_X:t.x<this.diamondCenterX-c.SCENE_MAX_OFFSET_X&&(t.x=this.diamondCenterX-c.SCENE_MAX_OFFSET_X)},e.getBoardList=function(){return this._boardList},e.getDiamondSprintList=function(){return this.diamondSprintList},i}(_)).prototype,"boardPrefab",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(P.prototype,"diamondPrefab",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=P))||S));e._RF.pop()}}}));

System.register("chunks:///_virtual/board.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constants.ts","./utils.ts"],(function(i){"use strict";var t,e,s,n,r,o,a,h,p,c,l,d,R,g;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,s=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){r=i.cclegacy,o=i._decorator,a=i.Vec3,h=i.Prefab,p=i.instantiate,c=i.MeshRenderer,l=i.Color,d=i.Component},function(i){R=i.Constants},function(i){g=i.utils}],execute:function(){var _,v,P,u,f,D,S,A,m,E,O,T,B;r._RF.push({},"bb50aLcTl1FbpB7Hy0H/DT9","board",void 0);var I=o.ccclass,y=o.property,F=new a;i("Board",(_=I("Board"),v=y(h),P=y({type:h}),u=y({type:h}),f=y({type:h}),D=y({type:h}),_((m=t((A=function(i){function t(){for(var t,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return t=i.call.apply(i,[this].concat(r))||this,s(t,"diamondPrefab",m,n(t)),s(t,"centerPrefab",E,n(t)),s(t,"wavePrefab",O,n(t)),s(t,"springTopPrefab",T,n(t)),s(t,"springHelixPrefab",B,n(t)),t.isActive=!1,t.diamondList=[],t.type=R.BOARD_TYPE.NORMAL,t.wave=null,t.waveInner=null,t.waveOriginScale=new a,t.currWaveFrame=0,t.currSpringFrame=0,t.currBumpFrame=R.BOARD_BUMP_FRAMES,t.springTop=null,t.springHelix=null,t.springHelixOriginScale=new a,t.center=null,t.isMovingRight=!0,t.hasDiamond=!1,t.isMoving=!1,t.posBeforeDrop=new a,t.originScale=new a,t.currDropFrame=R.BOARD_DROP_FRAMES,t._game=null,t}e(t,i);var r=t.prototype;return r.onLoad=function(){this.originScale.set(this.node.scale),this.initCenter(),this.initWave(),this.initSpring(),this.initDiamond(),console.log(this.node,"node")},r.update=function(){this.effectBump(),this.effectWave(),this.type!==R.BOARD_TYPE.SPRING&&this.type!==R.BOARD_TYPE.SPRINT||this.effectSpring(),this.effectDrop(),this.effectMove(),this.hasDiamond&&this.effectDiamondRotate()},r.reset=function(i,t,e){if(this.isActive=!1,this.type=i,this.node.setPosition(t),this.isMoving=!1,this.currDropFrame=R.BOARD_DROP_FRAMES,this.type!==R.BOARD_TYPE.NORMAL&&this.type!==R.BOARD_TYPE.DROP&&this.type!==R.BOARD_TYPE.SPRING||(this.isMoving=this.setMove(e)),this.type===R.BOARD_TYPE.GIANT?this.node.setScale(this.originScale.x*R.BOARD_SCALE_GIANT,this.originScale.y,this.originScale.z):this.type===R.BOARD_TYPE.DROP?(this.node.setScale(this.originScale.x,this.originScale.y*R.BOARD_HEIGTH_SCALE_DROP,this.originScale.z),this.posBeforeDrop.set(this.node.position)):this.node.setScale(this.originScale),this.springTop.active=!1,this.type!==R.BOARD_TYPE.SPRING&&this.type!==R.BOARD_TYPE.SPRINT||(this.springHelix.active=!0,this.springTop.active=!0,this.setSpringPos()),this.hasDiamond=!1,this.diamondList[0]){for(var s=0;s<5;s++)this.diamondList[s].active=!1;if(this.type===R.BOARD_TYPE.GIANT)for(var n=0;n<5;n++)this.diamondList[n].active=!0,this.hasDiamond=!0;else this.type!==R.BOARD_TYPE.NORMAL&&this.type!==R.BOARD_TYPE.DROP||Math.random()>.7&&(this.diamondList[2].active=R.game.initFirstBoard,R.game.initFirstBoard=!0,this.hasDiamond=!0);this.hasDiamond&&this.setDiamondPos()}},r.setDrop=function(){this.currDropFrame=0,this.posBeforeDrop.set(this.node.position)},r.effectDrop=function(){if(this.currDropFrame<R.BOARD_DROP_FRAMES){for(var i=0;i<5;i++)this.diamondList[i].active=!1;if(this.springTop.active){this.springHelix.active=!1;var t=this.springTop.position;this.springTop.setPosition(t.x,t.y-R.BOARD_DROP_STEP,t.z)}F.set(this.node.position),F.y-=R.BOARD_DROP_STEP,this.node.setPosition(F),this.setCenterPos(),this.currDropFrame++}},r.initDiamond=function(){for(var i=0;i<5;i++)this.diamondList[i]=p(this.diamondPrefab),this.node.parent.addChild(this.diamondList[i]),this.diamondList[i].active=!1},r.setDiamondPos=function(){for(var i=new a,t=0;t<5;t++)this.diamondList[t].active&&(i.set(this.node.position),i.x+=1.4*(t-2),i.y+=R.BOARD_HEIGTH,this.diamondList[t].setPosition(i))},r.hideDiamond=function(i){this.diamondList[i].active=!1},r.checkDiamond=function(i){if(this.hasDiamond){for(var t=!0,e=0;e<5;e++)this.diamondList[e].active&&(t=!1,Math.abs(i-this.diamondList[e].position.x)<=R.DIAMOND_SCORE_AREA&&(R.game.ball.playDiamondParticle(this.diamondList[e].position),this.hideDiamond(e),R.game.addScore(R.DIAMOND_SCORE)));t&&(this.hasDiamond=!1)}},r.effectDiamondRotate=function(){for(var i=0;i<5;i++){var t=this.diamondList[i].eulerAngles;this.diamondList[i].eulerAngles=new a(t.x,t.y+R.DIAMOND_ROTATE_STEP_Y,t.z)}},r.initSpring=function(){this.springHelix=p(this.springHelixPrefab),this.springHelixOriginScale=this.springHelix.getScale(),this.springHelix.setScale(1.5,1,1.5),this.node.parent.addChild(this.springHelix),this.springHelix.active=!1,this.currSpringFrame=2*R.BOARD_SPRING_FRAMES,this.springTop=p(this.springTopPrefab),this.node.parent.addChild(this.springTop),this.springTop.active=!1;var i=this.node.position.clone();i.y+=(R.BOARD_HEIGTH+R.SPRING_HEIGHT)/2,this.springTop.setPosition(i),this.setSpringPos()},r.setSpring=function(){this.currSpringFrame=0,this.setSpringPos(),this.springHelix.setScale(1.5,1,1.5),this.springHelix.active=!0,this.springTop.active=!0},r.setSpringPos=function(){var i=this.node.position.clone();i.y+=R.BOARD_HEIGTH/2,this.springHelix.setPosition(i),(i=this.node.position.clone()).y+=(R.BOARD_HEIGTH+R.SPRING_HEIGHT)/2,this.springTop.setPosition(i)},r.effectSpring=function(){var i=this.type===R.BOARD_TYPE.SPRINT?R.SPRING_HELIX_STEP_SPIRNT:R.SPRING_HELIX_STEP,t=this.type===R.BOARD_TYPE.SPRINT?R.SPRING_TOP_STEP_SPRINT:R.SPRING_TOP_STEP,e=this.springHelix.scale,s=this.springTop.position;this.currSpringFrame<R.BOARD_SPRING_FRAMES?(this.springHelix.setScale(e.x,e.y+i,e.z),this.springTop.setPosition(s.x,s.y+t,s.z),this.currSpringFrame++):this.currSpringFrame>=R.BOARD_SPRING_FRAMES&&this.currSpringFrame<2*R.BOARD_SPRING_FRAMES?(this.springHelix.setScale(e.x,e.y-i,e.z),this.springTop.setPosition(s.x,s.y-t,s.z),this.currSpringFrame++):this.springHelix.active=!1},r.setBump=function(){this.currBumpFrame=0},r.effectBump=function(){if(this.currBumpFrame<R.BOARD_BUMP_FRAMES){var i=this.node.position;this.node.setPosition(i.x,i.y+R.BOARD_BUMP_STEP[this.currBumpFrame],i.z),this.setCenterPos(),this.currBumpFrame++}},r.initCenter=function(){this.center=p(this.centerPrefab),this.node.parent.addChild(this.center),this.center.active=!1},r.setCenterPos=function(){var i=this.node.position.clone();i.y+=R.BOARD_HEIGTH/2,this.center.setPosition(i)},r.initWave=function(){this.wave=p(this.wavePrefab),this.node.parent.addChild(this.wave),this.wave.active=!1,this.waveInner=p(this.wavePrefab),this.node.parent.addChild(this.waveInner),this.waveInner.active=!1,this.currWaveFrame=R.BOARD_WAVE_FRAMES,this.waveOriginScale.set(this.wave.scale)},r.setWave=function(){if(this.type!=R.BOARD_TYPE.GIANT){this.currWaveFrame=0;var i=this.node.position.clone();i.y+=R.WAVE_OFFSET_Y,this.wave.setPosition(i),this.wave.setScale(this.waveOriginScale.clone()),this.wave.active=!0;var t=this.wave.getComponent(c).material.passes[0],e=t.getHandle("color"),s=new l("#dadada");s.a=127,t.setUniform(e,s),this.waveInner.setPosition(i),this.waveInner.setScale(this.waveOriginScale.clone())}},r.effectWave=function(){if(this.currWaveFrame<R.BOARD_WAVE_FRAMES){if(this.currWaveFrame>=R.BOARD_WAVE_INNER_START_FRAMES){this.waveInner.active||(this.waveInner.active=!0);var i=this.waveInner.getComponent(c).material.passes[0],t=i.getHandle("color"),e=new l("#dadada");e.a=127-127*Math.sin(.05*this.currWaveFrame),i.setUniform(t,e);var s=this.waveInner.getScale();this.waveInner.setScale(s.x+R.BOARD_WAVE_INNER_STEP,s.y,s.z+R.BOARD_WAVE_INNER_STEP)}var n=this.wave.getComponent(c).material.passes[0],r=n.getHandle("color"),o=new l("#dadada");o.a=127-127*Math.sin(.1*this.currWaveFrame),n.setUniform(r,o);var a=this.waveInner.getScale();this.wave.setScale(a.x+R.BOARD_WAVE_STEP,a.y,a.z+R.BOARD_WAVE_STEP),this.currWaveFrame++}else this.wave.active=!1,this.waveInner.active=!1},r.getHeight=function(){return this.type===R.BOARD_TYPE.DROP?R.BOARD_HEIGTH*R.BOARD_HEIGTH_SCALE_DROP:R.BOARD_HEIGTH},r.getRadius=function(){return this.type===R.BOARD_TYPE.GIANT?R.BOARD_RADIUS*R.BOARD_RADIUS_SCALE_GIANT:R.BOARD_RADIUS},r.setMove=function(i){var t=g.getDiffCoeff(i,1,10);return Math.random()*t>5},r.effectMove=function(){if(this.isMoving){var i=this.node.getPosition().clone(),t=i.x;this.isMovingRight&&t<=R.SCENE_MAX_OFFSET_X?(t+=R.BOARD_MOVING_STEP,this.node.setPosition(t,i.y,i.z)):this.isMovingRight&&t>R.SCENE_MAX_OFFSET_X?this.isMovingRight=!1:!this.isMovingRight&&t>=-R.SCENE_MAX_OFFSET_X?(t-=R.BOARD_MOVING_STEP,this.node.setPosition(t,i.y,i.z)):!this.isMovingRight&&t<-R.SCENE_MAX_OFFSET_X&&(this.isMovingRight=!0),this.type===R.BOARD_TYPE.SPRING&&(this.springHelix.setPosition(this.node.position.x,this.springHelix.position.y,this.springHelix.position.z),this.springTop.setPosition(this.node.position.x,this.springTop.position.y,this.springTop.position.z)),this.setCenterPos(),this.hasDiamond&&this.setDiamondPos()}},r.revive=function(){this.isActive=!1,this.isMoving=!1,this.type===R.BOARD_TYPE.DROP&&(this.currDropFrame=R.BOARD_DROP_FRAMES,this.node.setPosition(this.posBeforeDrop))},t}(d)).prototype,"diamondPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(A.prototype,"centerPrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(A.prototype,"wavePrefab",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(A.prototype,"springTopPrefab",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(A.prototype,"springHelixPrefab",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=A))||S));r._RF.pop()}}}));

System.register("chunks:///_virtual/camera-ctrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constants.ts"],(function(i){"use strict";var t,s,o,n,e,r,a,_,c,h;return{setters:[function(i){t=i.applyDecoratedDescriptor,s=i.inheritsLoose,o=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){e=i.cclegacy,r=i._decorator,a=i.Vec3,_=i.Node,c=i.Component},function(i){h=i.Constants}],execute:function(){var P,l,u,p,g;e._RF.push({},"b5204GgQaBDNqMtOdI4KDJl","camera-ctrl",void 0);var A=r.ccclass,y=r.property,M=new a;i("CameraCtrl",(P=A("CameraCtrl"),l=y(_),P((g=t((p=function(i){function t(){for(var t,s=arguments.length,e=new Array(s),r=0;r<s;r++)e[r]=arguments[r];return t=i.call.apply(i,[this].concat(e))||this,o(t,"planeNode",g,n(t)),t.preType=h.BOARD_TYPE.NORMAL,t._originPos=new a,t}s(t,i);var e=t.prototype;return e.start=function(){this._originPos.set(h.CAMERA_INIT_POS),this.setPosition(this._originPos),this.node.eulerAngles=h.CAMERA_INIT_ROT},e.setOriginPosX=function(i){this._originPos.x=i},e.setOriginPosY=function(i){this._originPos.y=i},e.update=function(){if(M.set(this.node.position),M.x!==this._originPos.x||M.y!==this._originPos.y){if(Math.abs(M.x-this._originPos.x)<=h.CAMERA_MOVE_MINI_ERR)M.x=this._originPos.x,this.setPosition(M);else{var i=this._originPos.x-M.x;M.x+=i/h.CAMERA_MOVE_X_FRAMES,this.setPosition(M)}if(M.set(this.node.position),Math.abs(M.y-this._originPos.y)<=h.CAMERA_MOVE_MINI_ERR)M.y=this._originPos.y,this.setPosition(M);else{var t=this._originPos.y-M.y;this.preType===h.BOARD_TYPE.SPRING?(M.y+=t/h.CAMERA_MOVE_Y_FRAMES_SPRING,this.setPosition(M)):(M.y+=t/h.CAMERA_MOVE_Y_FRAMES,this.setPosition(M))}}},e.reset=function(){this._originPos.set(h.CAMERA_INIT_POS),this.setPosition(this._originPos)},e.setPosition=function(i){this.node.setPosition(i);var t=i.y-27;this.planeNode.setPosition(i.x,t,-100)},t}(c)).prototype,"planeNode",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=p))||u));e._RF.pop()}}}));

System.register("chunks:///_virtual/constants.ts",["cc"],(function(_){"use strict";var A,R;return{setters:[function(_){A=_.cclegacy,R=_.Vec3}],execute:function(){var E,S,P,O;A._RF.push({},"d9bbf8RNxZP/qHAzCKjmpIn","constants",void 0),function(_){_[_.NORMAL=0]="NORMAL",_[_.SPRING=1]="SPRING",_[_.DROP=2]="DROP",_[_.GIANT=3]="GIANT",_[_.SPRINT=4]="SPRINT"}(E||(E={})),function(_){_[_.READY=1]="READY",_[_.PLAYING=2]="PLAYING",_[_.PAUSE=3]="PAUSE",_[_.OVER=4]="OVER"}(S||(S={})),function(_){_.RESTART="restart",_.REVIVE="revive",_.ADDSCORE="add-score",_.DYING="dying",_.HIDETIPS="hide-tips",_.OPENLEVEL="open-level",_.CONTINUELEVEL="continue-level"}(P||(P={})),function(_){_[_.JUMPUP=1]="JUMPUP",_[_.FALLDOWN=2]="FALLDOWN",_[_.SPRINT=3]="SPRINT"}(O||(O={}));var N=_("Constants",(function(){}));N.game=void 0,N.COEFF_POS_BALL=8/360,N.PLAYER_MAX_DOWN_FRAMES=40,N.MAX_SCORE=0,N.LEVEL=1,N.SCORE_BOARD_CENTER=2,N.SCORE_BOARD_NOT_CENTER=1,N.BOARD_INIT_POS=new R(0,10,0),N.BOARD_NUM=6,N.BOARD_NEW_INDEX=2,N.BOARD_HEIGTH=.25,N.BOARD_RADIUS=1.5,N.BOARD_HEIGTH_SCALE_DROP=.5,N.BOARD_RADIUS_SCALE_GIANT=2.8,N.BOARD_GAP=4.3,N.BOARD_GAP_SPRING=9,N.BOARD_GAP_SPRINT=192,N.BOARD_SCALE_GIANT=2.8,N.SCENE_MAX_OFFSET_X=3.5,N.BOARD_TYPE=E,N.BOARD_DROP_FRAMES=40,N.BOARD_DROP_STEP=.5,N.BOARD_RADIUS_CENTER=.35,N.BOARD_SPRING_FRAMES=10,N.BOARD_WAVE_FRAMES=16,N.BOARD_WAVE_INNER_START_FRAMES=8,N.BOARD_WAVE_INNER_STEP=.24,N.BOARD_WAVE_STEP=2.25,N.BOARD_MOVING_STEP=.03,N.SPRING_HEIGHT=.2,N.SPRING_HELIX_STEP=.5,N.SPRING_HELIX_STEP_SPIRNT=1.2,N.SPRING_TOP_STEP=.25,N.SPRING_TOP_STEP_SPRINT=.5,N.WAVE_OFFSET_Y=.065,N.CAMERA_INIT_POS=new R(0,15,22),N.CAMERA_INIT_ROT=new R(-11,0,0),N.CAMERA_MOVE_X_FRAMES=20,N.CAMERA_MOVE_Y_FRAMES=15,N.CAMERA_MOVE_Y_FRAMES_SPRING=23,N.CAMERA_MOVE_MINI_ERR=.02,N.CAMERA_OFFSET_Y=10,N.CAMERA_OFFSET_Y_SPRINT=15,N.BOARD_BUMP_FRAMES=10,N.BOARD_BUMP_STEP=[-.15,-.1,-.07,-.02,-.003,.003,.02,.07,.1,.15],N.GAME_STATE=S,N.GAME_EVENT=P,N.BALL_RADIUS=.5,N.BALL_JUMP_STATE=O,N.BALL_JUMP_FRAMES=20,N.BALL_JUMP_FRAMES_SPRING=27,N.BALL_JUMP_FRAMES_SPRINT=240,N.BALL_JUMP_STEP=[.8,.6,.5,.4,.3,.2,.15,.1,.05,.03],N.BALL_JUMP_STEP_SPRING=[1.2,.8,.6,.4,.3,.2,.15,.1,.05],N.BALL_JUMP_STEP_SPRINT=.8,N.BALL_SPRINT_STEP_Y=10,N.DIAMOND_NUM=10,N.DIAMOND_PIECE_NUM=10,N.DIAMOND_RADIUS=.3,N.DIAMOND_ROTATE_STEP_Y=1.5,N.DIAMOND_SCORE=1,N.DIAMOND_SCORE_AREA=.6,N.DIAMOND_SPRINT_SCORE_AREA=1,N.DIAMOND_SPRINT_STEP_Y=4,N.DIAMOND_START_FRAME=6,N.normalDt=1/60,N.CURRENT_LEVEL=1,N.LEVEL_STEP=20,A._RF.pop()}}}));

System.register("chunks:///_virtual/game.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constants.ts","./ball.ts","./board-manager.ts","./camera-ctrl.ts","./ui-manager.ts","./audio-manager.ts","./score.ts","./GetUrlParam.ts"],(function(e){"use strict";var t,a,i,n,r,o,s,l,u,c,h,g,E,f,d,m,v,M;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,r=e.createClass},function(e){o=e.cclegacy,s=e._decorator,l=e.Prefab,u=e.instantiate,c=e.Component},function(e){h=e.Constants},function(e){g=e.Ball},function(e){E=e.BoardManager},function(e){f=e.CameraCtrl},function(e){d=e.UIManager},function(e){m=e.AudioManager},function(e){v=e.AddScore},function(e){M=e.getUrlParam}],execute:function(){var b,p,A,T,G,R,_,S,y,L,C,N,P;o._RF.push({},"6b6999+5cFK4K47RCoawnB4","game",void 0);var V=s.ccclass,w=s.property;e("Game",(b=V("Game"),p=w(l),A=w(E),T=w(f),G=w(d),R=w(m),b((y=t((S=function(e){function t(){for(var t,a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,i(t,"ballPref",y,n(t)),i(t,"boardManager",L,n(t)),i(t,"cameraCtrl",C,n(t)),i(t,"uiManager",N,n(t)),i(t,"audioManager",P,n(t)),t.initFirstBoard=!1,t.state=h.GAME_STATE.READY,t.score=0,t.hasRevive=!1,t._ball=null,t}a(t,e);var o=t.prototype;return o.__preload=function(){h.game=this},o.onLoad=function(){if(!this.ballPref)return console.log("There is no ball!!"),void(this.enabled=!1);var e=u(this.ballPref);e.parent=this.node.parent,this._ball=e.getComponent(g)},o.start=function(){this.node.on(h.GAME_EVENT.RESTART,this.gameStart,this),this.node.on(h.GAME_EVENT.REVIVE,this.gameRevive,this),this.node.on(h.GAME_EVENT.OPENLEVEL,this.openLevelResult,this)},o.onDestroy=function(){this.node.off(h.GAME_EVENT.RESTART,this.gameStart,this),this.node.off(h.GAME_EVENT.REVIVE,this.gameRevive,this),this.node.off(h.GAME_EVENT.OPENLEVEL,this.gameRevive,this)},o.openLevelResult=function(){this.uiManager.levelResultActive||this.uiManager.showGameLevelResult(!0)},o.gameContinue=function(){this.uiManager.showDialog(!1),this.uiManager.showGameLevelResult(!1),this.state=h.GAME_STATE.PLAYING,this._ball.gameContinue(),this.cameraCtrl.reset(),this.boardManager.reset(),this.uiManager.showGameLevelResult(!1)},o.resetGame=function(){this.state=h.GAME_STATE.READY,this._ball.reset(),this.cameraCtrl.reset(),this.boardManager.reset(),this.uiManager.showGameLevelResult(!1),this.uiManager.showDialog(!0)},o.gameStart=function(){this.audioManager.playSound(),this.uiManager.showDialog(!1),this.state=h.GAME_STATE.PLAYING,this.hasRevive=!1,this.score=0,this._ball.restLevel()},o.gameDie=function(){var e,t=this;this.audioManager.playSound(!1),this.state=h.GAME_STATE.PAUSE;var a=h.game.score;console.log(a,"score");var i=M("user");(i=(i=i?decodeURIComponent(i):null)?JSON.parse(i):null)&&v(null==(e=i)?void 0:e.id,a),this.node.emit(h.GAME_EVENT.DYING,(function(){t.gameOver()}))},o.gameOver=function(){this.state=h.GAME_STATE.OVER,this.audioManager.playSound(!1),this.resetGame()},o.gameRevive=function(){var e=this;this.hasRevive=!0,this.state=h.GAME_STATE.READY,this.ball.revive(),this.scheduleOnce((function(){e.audioManager.playSound(),e.state=h.GAME_STATE.PLAYING}),1)},o.addScore=function(e){this.score+=e,this.node.emit(h.GAME_EVENT.ADDSCORE,this.score)},r(t,[{key:"ball",get:function(){return this._ball}}]),t}(c)).prototype,"ballPref",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(S.prototype,"boardManager",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(S.prototype,"cameraCtrl",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(S.prototype,"uiManager",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(S.prototype,"audioManager",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=S))||_));o._RF.pop()}}}));

System.register("chunks:///_virtual/gameLevelResult.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constants.ts"],(function(e){"use strict";var t,n,r,i,o,a,u,l,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,u=e.Node,l=e.Component},function(e){c=e.Constants}],execute:function(){var s,p,f,g,m,v,y;o._RF.push({},"357cffsHiJPQrX+RLzgEYFd","gameLevelResult",void 0);var d=a.ccclass,C=a.property;e("gameLevelResult",(s=d("gameLevelResult"),p=C(u),f=C(u),s((v=t((m=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"pageContinue",v,i(t)),r(t,"gameOver",y,i(t)),t}n(t,e);var o=t.prototype;return o.start=function(){},o.update=function(e){},o.onGameContinueClick=function(){c.game.gameContinue()},o.onGameOverClick=function(){c.game.gameOver()},t}(l)).prototype,"pageContinue",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(m.prototype,"gameOver",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=m))||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/GetUrlParam.ts",["cc"],(function(t){"use strict";var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"8683apXizZFhpdi8GCYk203","GetUrlParam",void 0);t("getUrlParam",(function(t){var r=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),e=window.location.search.substr(1).match(r);return null!=e?e[2]:null}));r._RF.pop()}}}));

System.register("chunks:///_virtual/index.ts",["cc"],(function(){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"72e24YT/gJKBbsS1YC466HD","index",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./migrate-canvas.ts","./index.ts","./score.ts","./constants.ts","./audio-manager.ts","./ball.ts","./board-manager.ts","./board.ts","./camera-ctrl.ts","./game.ts","./gameLevelResult.ts","./page-result.ts","./page-start.ts","./revive.ts","./ui-manager.ts","./update-value-label.ts","./GetUrlParam.ts","./pool-manager.ts","./utils.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/migrate-canvas.ts",["cc"],(function(){"use strict";var n,e,t,i,r,o;return{setters:[function(a){n=a.cclegacy,e=a.director,t=a.Director,i=a.Canvas,r=a.Camera,o=a.game}],execute:function(){n._RF.push({},"4144fmK8HZAn4CiuF3twv5O","migrate-canvas",void 0);var a=1048575;function c(n,e){for(var t=0,i=n.children.length;t<i;t++)n.children[t].layer=e,c(n.children[t],e)}e.on(t.EVENT_AFTER_SCENE_LAUNCH,(function(){var n,t,l,s=null==(n=e.getScene())?void 0:n.children,m=null==(t=e.getScene())?void 0:t.getComponentsInChildren(i);if(!(m.length<=1)){m=m.filter((function(n){return!!n.cameraComponent}));var u=null==(l=e.getScene())?void 0:l.getComponentsInChildren(r),v=0;u.forEach((function(n){return v|=n.visibility&a}));for(var p=[],f=0,C=s.length;f<C;f++){var h=s[f];if(o.isPersistRootNode(h)){var d=h.getComponentsInChildren(i);0!==d.length&&p.push.apply(p,d.filter((function(n){return!!n.cameraComponent})))}}p.forEach((function(n){if(m.find((function(e){return e!==n&&e.cameraComponent.visibility&n.cameraComponent.visibility&a}))){var e=~v,t=e&~(e-1);n.cameraComponent.visibility=t|4293918720&n.cameraComponent.visibility,c(n.node,t),v|=e}}))}}));var l=cc.Node.prototype.setParent;function s(n){var e=null,t=n.getComponent(i);return t&&t.cameraComponent?e=t.cameraComponent.visibility&t.node.layer?t.node.layer:t.cameraComponent.visibility&~(t.cameraComponent.visibility-1):(n.parent&&(e=s(n.parent)),e)}cc.Node.prototype.setParent=function(n,e){if(l.call(this,n,e),n){var t=s(this);t&&(this.layer=t,c(this,t))}},n._RF.pop()}}}));

System.register("chunks:///_virtual/page-result.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constants.ts","./update-value-label.ts","./revive.ts"],(function(e){"use strict";var t,i,s,n,r,o,a,l,u,c,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,s=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,a=e.Node,l=e.Component},function(e){u=e.Constants},function(e){c=e.UpdateValueLabel},function(e){h=e.Revive}],execute:function(){var p,g,f,d,b,T,E,y,v,m,P;r._RF.push({},"31b007MqixM3YyJROFsTMEh","page-result",void 0);var D=o.ccclass,w=o.property;e("PageResult",(p=D("PageResult"),g=w({type:c}),f=w(a),d=w(a),b=w(a),p((y=t((E=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,s(t,"scoreLabel",y,n(t)),t.targetProgress=0,s(t,"nodeTips1",v,n(t)),s(t,"nodeTips2",m,n(t)),s(t,"result",P,n(t)),t}i(t,e);var r=t.prototype;return r.init=function(){this.targetProgress=0,this.scoreLabel.playUpdateValue(this.targetProgress,this.targetProgress,0),this.scoreLabel.isPlaying=!1},r.onEnable=function(){u.game.node.on(u.GAME_EVENT.HIDETIPS,this.hideTips,this),u.game.node.on(u.GAME_EVENT.ADDSCORE,this.addScore,this),u.game.node.on(u.GAME_EVENT.DYING,this.gameDie,this),this.showTips(!0),this.showResult(!1),this.init()},r.start=function(){this.result.getComponent(h).pageResult=this},r.onDisable=function(){u.game.node.off(u.GAME_EVENT.HIDETIPS,this.hideTips,this),u.game.node.off(u.GAME_EVENT.ADDSCORE,this.addScore,this)},r.addScore=function(e){this.targetProgress=e;var t=Number(this.scoreLabel.string);this.scoreLabel.playUpdateValue(t,this.targetProgress,(this.targetProgress-t)/20)},r.gameDie=function(){this.showTips(!1),this.showResult(!0)},r.showTips=function(e){this.nodeTips1.active=e,this.nodeTips2.active=e},r.hideTips=function(){this.showTips(!1)},r.showResult=function(e){this.result.active=e},t}(l)).prototype,"scoreLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(E.prototype,"nodeTips1",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(E.prototype,"nodeTips2",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(E.prototype,"result",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=E))||T));r._RF.pop()}}}));

System.register("chunks:///_virtual/page-start.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constants.ts"],(function(t){"use strict";var e,n,r,a,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator,a=t.Component},function(t){o=t.Constants}],execute:function(){var s;n._RF.push({},"75579oVThhNcJN3jNLu42YC","page-start",void 0);var c=r.ccclass;r.property,t("PageStart",c("PageStart")(s=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.gameStart=function(){o.game.node.emit(o.GAME_EVENT.RESTART),o.game.audioManager.playClip()},n}(a))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/pool-manager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var o,e,n,i,r;return{setters:[function(t){o=t.createClass},function(t){e=t.cclegacy,n=t._decorator,i=t.instantiate,r=t.NodePool}],execute:function(){var a,c;e._RF.push({},"f92c3xOcsdMEKh7W/84QPrD","pool-manager",void 0);var s=n.ccclass;n.property,t("PoolManager",s("PoolManager")(((c=function(){function t(){this.dictPool={},this.dictPrefab={}}var e=t.prototype;return e.getNode=function(t,o){var e=t.data.name;this.dictPrefab[e]=t;var n=null;if(this.dictPool.hasOwnProperty(e)){var a=this.dictPool[e];n=a.size()>0?a.get():i(t)}else{var c=new r;this.dictPool[e]=c,n=i(t)}return n.parent=o,n},e.putNode=function(t){var o=t.name,e=null;this.dictPool.hasOwnProperty(o)?e=this.dictPool[o]:(e=new r,this.dictPool[o]=e),e.put(t)},e.clearPool=function(t){this.dictPool.hasOwnProperty(t)&&this.dictPool[t].clear()},o(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=void 0,a=c))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/revive.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constants.ts"],(function(e){"use strict";var n,i,t,o,r,s,u,l,a,c,p;return{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inheritsLoose,t=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,u=e.Widget,l=e.Label,a=e.SpriteComponent,c=e.Component},function(e){p=e.Constants}],execute:function(){var g,h,b,w,f,m,v,C,y,D,L,R,d;r._RF.push({},"37e87RwLXtA5LwGn6Zuq48u","revive",void 0);var T=s.ccclass,M=s.property;e("Revive",(g=T("Revive"),h=M(u),b=M(l),w=M({type:l}),f=M({type:l}),m=M(a),g((y=n((C=function(e){function n(){for(var n,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(n=e.call.apply(e,[this].concat(r))||this).closeCb=null,t(n,"wgMenu",y,o(n)),t(n,"historyLabel",D,o(n)),t(n,"scoreLabel",L,o(n)),t(n,"progressLabel",R,o(n)),t(n,"spCountDown",d,o(n)),n.pageResult=null,n.countDownTime=void 0,n.currentTime=void 0,n.isCountDowning=void 0,n}i(n,e);var r=n.prototype;return r.onEnable=function(){this.show()},r.show=function(){var e=p.game.score;this.scoreLabel.string=e.toString(),p.MAX_SCORE<e&&(p.MAX_SCORE=e),this.historyLabel.string=p.MAX_SCORE.toString(),this.countDownTime=5,this.progressLabel.string=this.countDownTime+"",this.currentTime=0,this.spCountDown.fillRange=1,this.isCountDowning=!0},r.onBtnReviveClick=function(){this.isCountDowning=!1,p.game.audioManager.playClip(),p.game.node.emit(p.GAME_EVENT.REVIVE),this.pageResult.showResult(!1)},r.onBtnSkipClick=function(){p.game.audioManager.playClip(),this.isCountDowning=!1,p.game.gameOver()},r.update=function(e){if(this.isCountDowning){this.currentTime+=e;var n=this.countDownTime-this.currentTime;this.progressLabel.string=Math.ceil(n)+"",n<=0&&(n=0,this.isCountDowning=!1,this.onBtnSkipClick());var i=n/this.countDownTime;this.spCountDown.fillRange=i}},n}(c)).prototype,"wgMenu",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=n(C.prototype,"historyLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=n(C.prototype,"scoreLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=n(C.prototype,"progressLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=n(C.prototype,"spCountDown",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=C))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/score.ts",["cc","./axios.min.mjs_cjs=&original=.js","./axios.min.js"],(function(e){"use strict";var t,c;return{setters:[function(e){t=e.cclegacy},null,function(e){c=e.default}],execute:function(){t._RF.push({},"06f81hPsApGIrt3vSzJTbZ0","score",void 0);e("AddScore",(function(e,t){try{return c.get("https://main.d12ofx71u78ebe.amplifyapp.com/api/challenge/score?userId="+e+"&score="+t)}catch(e){return e}}));t._RF.pop()}}}));

System.register("chunks:///_virtual/ui-manager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constants.ts"],(function(e){"use strict";var t,r,n,i,a,l,u,o,c,s,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized,a=e.createClass},function(e){l=e.cclegacy,u=e._decorator,o=e.Node,c=e.Label,s=e.Component},function(e){p=e.Constants}],execute:function(){var g,f,v,b,h,L,m,y,R,z,w,d,S;l._RF.push({},"4becfUEfe1C2prK7h8zxNvz","ui-manager",void 0);var C=u.ccclass,D=u.property;e("UIManager",(g=C("UIManager"),f=D(o),v=D(o),b=D(c),h=D(c),L=D(o),g((R=t((y=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return t=e.call.apply(e,[this].concat(a))||this,n(t,"pageStart",R,i(t)),n(t,"pageResult",z,i(t)),n(t,"pageLevel",w,i(t)),n(t,"currentLevel",d,i(t)),n(t,"gameLevelResult",S,i(t)),t}r(t,e);var l=t.prototype;return l.onLoad=function(){p.game.uiManager=this},l.start=function(){this.pageResult.active=!1,this.gameLevelResult.active=!1,this.currentLevel.string="当前关卡："+p.LEVEL.toString()},l.showGameLevelResult=function(e){},l.showDialog=function(e){this.pageResult.active=!e,this.pageStart.active=e},a(t,[{key:"levelResultActive",get:function(){return this.gameLevelResult.active}}]),t}(s)).prototype,"pageStart",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(y.prototype,"pageResult",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(y.prototype,"pageLevel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=t(y.prototype,"currentLevel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(y.prototype,"gameLevelResult",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=y))||m));l._RF.pop()}}}));

System.register("chunks:///_virtual/update-value-label.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,a,s,e;return{setters:[function(t){i=t.inheritsLoose},function(t){a=t.cclegacy,s=t._decorator,e=t.Label}],execute:function(){var r;a._RF.push({},"02566VN0PhN8o7NqZg0WyFs","update-value-label",void 0);var n=s.ccclass;s.property,t("UpdateValueLabel",n("UpdateValueLabel")(r=function(t){function a(){for(var i,a=arguments.length,s=new Array(a),e=0;e<a;e++)s[e]=arguments[e];return(i=t.call.apply(t,[this].concat(s))||this).isPlaying=!1,i.startVal=0,i.endVal=0,i.diffVal=0,i.currTime=0,i.changingTime=0,i}i(a,t);var s=a.prototype;return s.start=function(){},s.playUpdateValue=function(t,i,a){this.startVal=t,this.endVal=i,this.diffVal=this.endVal-this.startVal,this.currTime=0,this.changingTime=a,this.string=t.toString(),this.isPlaying=!0},s.update=function(t){if(this.isPlaying){if(this.currTime<this.changingTime){this.currTime+=t;var i=this.startVal+parseInt((this.currTime/this.changingTime*this.diffVal).toString());return i<this.startVal?i=this.startVal:i>this.endVal&&(i=this.endVal),void(this.string=""+i)}this.string=""+this.endVal,this.isPlaying=!1}},a}(e))||r);a._RF.pop()}}}));

System.register("chunks:///_virtual/utils.ts",["cc"],(function(t){"use strict";var e,r;return{setters:[function(t){e=t.cclegacy,r=t._decorator}],execute:function(){e._RF.push({},"dddce/2a/tOSLUiRKNMAQVd","utils",void 0);r.ccclass,r.property,t("utils",{getDiffCoeff:function(t,e,r){return(r*t+1)/(1*t+((r+1)/e-1))},getRandomInt:function(t,e){var r=Math.random()*(e-t+1)+t;return Math.floor(r)}});e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});